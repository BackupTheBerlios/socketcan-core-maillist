<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> mcp251x: endless irq when MERRF while receiving
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2010-July/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20mcp251x%3A%20endless%20irq%20when%20MERRF%20while%20receiving&In-Reply-To=%3CAANLkTikNgkjjHt3cadMMBLm-%3D7f5M9p4A686etNeiOgR%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004476.html">
   <LINK REL="Next"  HREF="004480.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>mcp251x: endless irq when MERRF while receiving</H1>
    <B>christian pellegrin</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20mcp251x%3A%20endless%20irq%20when%20MERRF%20while%20receiving&In-Reply-To=%3CAANLkTikNgkjjHt3cadMMBLm-%3D7f5M9p4A686etNeiOgR%40mail.gmail.com%3E"
       TITLE="mcp251x: endless irq when MERRF while receiving">chripell at fsfe.org
       </A><BR>
    <I>Tue Jul 27 18:24:58 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="004476.html">mcp251x: endless irq when MERRF while receiving
</A></li>
        <LI>Next message: <A HREF="004480.html">[RFC PATCH] can: improved CAN error state handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4500">[ date ]</a>
              <a href="thread.html#4500">[ thread ]</a>
              <a href="subject.html#4500">[ subject ]</a>
              <a href="author.html#4500">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Hm, I personally never worked with that CAN controller. Maybe Christian
</I>&gt;<i> has an idea what goes wrong.
</I>

Hi all,

sorry for the late response but I just returned from a trip far away
from the console and I'm still flooded by the backlog.

At a first glance the scenario described by Alexander makes sense: If
somehow we get in the ist loop and with MERR set we never get out of
it. I don't know what really happens (MERR irq is disabled and we
shouldn't get other kinds of irqs with the bus gone belly up) but we
should protect ourself from this condition. BTW I've never seen it
after many months in practice. I will do some testing in the next days
(and reread the data sheet). I want to try the spi_async driver too as
soon as I find some time.

-- 
Christian Pellegrin, see <A HREF="http://www.evolware.org/chri/">http://www.evolware.org/chri/</A>
&quot;Real Programmers don't play tennis, or any other sport which requires
you to change clothes. Mountain climbing is OK, and Real Programmers
wear their climbing boots to work in case a mountain should suddenly
spring up in the middle of the computer room.&quot;

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004476.html">mcp251x: endless irq when MERRF while receiving
</A></li>
	<LI>Next message: <A HREF="004480.html">[RFC PATCH] can: improved CAN error state handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4500">[ date ]</a>
              <a href="thread.html#4500">[ thread ]</a>
              <a href="subject.html#4500">[ subject ]</a>
              <a href="author.html#4500">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
