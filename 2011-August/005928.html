<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [RFC 5/5] [powerpc] Implement a p1010rdb clock source.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2011-August/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BRFC%205/5%5D%20%5Bpowerpc%5D%20Implement%20a%20p1010rdb%20clock%20source.&In-Reply-To=%3C9C64B7751C3BCA41B64A68E23005A7BE1BDF8C%40039-SN1MPN1-004.039d.mgd.msft.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005922.html">
   <LINK REL="Next"  HREF="005932.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[RFC 5/5] [powerpc] Implement a p1010rdb clock source.</H1>
    <B>U Bhaskar-B22300</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BRFC%205/5%5D%20%5Bpowerpc%5D%20Implement%20a%20p1010rdb%20clock%20source.&In-Reply-To=%3C9C64B7751C3BCA41B64A68E23005A7BE1BDF8C%40039-SN1MPN1-004.039d.mgd.msft.net%3E"
       TITLE="[RFC 5/5] [powerpc] Implement a p1010rdb clock source.">B22300 at freescale.com
       </A><BR>
    <I>Tue Aug  9 11:27:22 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005922.html">[RFC 5/5] [powerpc] Implement a p1010rdb clock source.
</A></li>
        <LI>Next message: <A HREF="005932.html">[RFC 5/5] [powerpc] Implement a p1010rdb clock source.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5928">[ date ]</a>
              <a href="thread.html#5928">[ thread ]</a>
              <a href="subject.html#5928">[ subject ]</a>
              <a href="author.html#5928">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&gt;<i> -----Original Message-----
</I>&gt;<i> From: Wolfgang Grandegger [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">wg at grandegger.com</A>]
</I>&gt;<i> Sent: Tuesday, August 09, 2011 2:03 PM
</I>&gt;<i> To: U Bhaskar-B22300
</I>&gt;<i> Cc: Marc Kleine-Budde; <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">socketcan-core at lists.berlios.de</A>;
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">netdev at vger.kernel.org</A>; <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">Devicetree-discuss at lists.ozlabs.org</A>
</I>&gt;<i> Subject: Re: [RFC 5/5] [powerpc] Implement a p1010rdb clock source.
</I>&gt;<i> 
</I>&gt;<i> Hi Bhaskar,
</I>&gt;<i> 
</I>&gt;<i> On 08/09/2011 09:57 AM, U Bhaskar-B22300 wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; -----Original Message-----
</I>&gt;<i> &gt;&gt; From: Marc Kleine-Budde [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">mkl at pengutronix.de</A>]
</I>&gt;<i> &gt;&gt; Sent: Tuesday, August 09, 2011 12:23 AM
</I>&gt;<i> &gt;&gt; To: Wolfgang Grandegger
</I>&gt;<i> &gt;&gt; Cc: <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">socketcan-core at lists.berlios.de</A>; <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">netdev at vger.kernel.org</A>; U
</I>&gt;<i> &gt;&gt; Bhaskar- B22300
</I>&gt;<i> &gt;&gt; Subject: Re: [RFC 5/5] [powerpc] Implement a p1010rdb clock source.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On 08/08/2011 05:33 PM, Wolfgang Grandegger wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt; ACK - The device tree bindings as in mainline's Documentation is a
</I>&gt;<i> &gt;&gt; mess.
</I>&gt;<i> &gt;&gt;&gt;&gt; If the powerpc guys are happy with a clock interfaces based
</I>&gt;<i> &gt;&gt;&gt;&gt; approach somewhere in arch/ppc, I'm more than happy to remove:
</I>&gt;<i> &gt;&gt;&gt;&gt; - fsl,flexcan-clock-source (not implemented, even in the fsl
</I>&gt;<i> &gt;&gt;&gt;&gt; driver)
</I>&gt;<i> &gt; [Bhaskar]I have pushed the FlexCAN series of patches, It contains the
</I>&gt;<i> &gt; usage of all the fields posted in the FlexCAN bindings at
</I>&gt;<i> &gt; <A HREF="http://git.kernel.org/?p=linux/kernel/git/stable/linux-3.0.y.git;a=blo">http://git.kernel.org/?p=linux/kernel/git/stable/linux-3.0.y.git;a=blo</A>
</I>&gt;<i> &gt; b;f=Documentation/devicetree/bindings/net/can/fsl-flexcan.txt;h=1a729f
</I>&gt;<i> &gt; 089866259ef82d0db5893ff7a8c54d5ccf;hb=94ed5b4788a7cdbe68bc7cb8516972cb
</I>&gt;<i> &gt; ebdc8274
</I>&gt;<i> 
</I>&gt;<i> As Marc already pointed out, Robin already has a much more advanced patch
</I>&gt;<i> stack in preparation. Especially your patches do not care about the
</I>&gt;<i> already existing Flexcan core on the Freescale's ARM socks.
</I>[Bhaskar] No, the patches are taking care of the existing ARM functionality.
	I have not tested on the ARM based board, but the patches are made in a 
      Manner that it should not break the ARM based functionality.
&gt;<i> 
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; - fsl,flexcan-clock-divider \__ replace with code in arch/ppc, or
</I>&gt;<i> &gt;&gt;&gt;&gt; - clock-frequency           /   a single clock-frequency attribute
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; In the &quot;net-next-2.6&quot; tree there is also:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;  $ grep flexcan arch/powerpc/boots/dts/*.dts
</I>&gt;<i> &gt;&gt;&gt;   p1010rdb.dts:			fsl,flexcan-clock-source =
</I>&gt;<i> &quot;platform&quot;;
</I>&gt;<i> &gt;&gt;&gt;   p1010rdb.dts:			fsl,flexcan-clock-source =
</I>&gt;<i> &quot;platform&quot;;
</I>&gt;<i> &gt;&gt;&gt;   p1010si.dtsi:			compatible = &quot;fsl,flexcan-v1.0&quot;;
</I>&gt;<i> &gt;&gt;&gt;   p1010si.dtsi:			fsl,flexcan-clock-divider = &lt;2&gt;;
</I>&gt;<i> &gt;&gt;&gt;   p1010si.dtsi:			compatible = &quot;fsl,flexcan-v1.0&quot;;
</I>&gt;<i> &gt;&gt;&gt;   p1010si.dtsi:			fsl,flexcan-clock-divider = &lt;2&gt;;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Especially the fsl,flexcan-clock-divider = &lt;2&gt;; might make people
</I>&gt;<i> &gt;&gt;&gt; think, that they could set something else.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt; [Bhaskar] As it is mentioned in the Flexcan bindings, the need of
</I>&gt;<i> fsl,flexcan-clock-divider = &lt;2&gt;;
</I>&gt;<i> &gt; 	    But I kept it as &quot;2&quot; because FlexCan clock source is the
</I>&gt;<i> platform clock and it is CCB/2
</I>&gt;<i> &gt; 	    If the &quot;2&quot; is misleading, the bindings can be changed or some
</I>&gt;<i> text can be written to make the meaning of &quot;2&quot;
</I>&gt;<i> &gt;           Understandable , Please suggest ..
</I>&gt;<i> 
</I>&gt;<i> The clock source and frequency is fixed. Why do we need an extra
</I>&gt;<i> properties for that. We have panned to remove these bogus bindings from
</I>&gt;<i> the Linux kernel, which sneaked in *without* any review on the relevant
</I>&gt;<i> mailing lists (at least I have not realized any posting). We do not think
</I>&gt;<i> they are really needed. They just confuse the user. We also prefer to use
</I>&gt;<i> the compatibility string &quot;fsl,flexcan&quot; instead &quot;fsl,flexcan-v1.0&quot;. It's
</I>&gt;<i> unusual to add a version number, which is  for the Flexcan on the PowerPC
</I>&gt;<i> cores only, I assume, but there will be device tree for ARM soon. A
</I>&gt;<i> proper compatibility string would be &quot;fsl,p1010-flexcan&quot; if we really
</I>&gt;<i> need to distinguish.
</I>&gt;<i> 
</I>[Bhaskar] About clock source.. There can be two sources of clock for the CAN.
	Oscillator or the platform clock, but at present only platform clock is supported
	in P1010.If we remove the fsl,flexcan-clock-source property, we will lost the flexibility
	of changing the clock source ..
	   
          About clock-frequency... it is also not fixed. It depends on the platform clock which in turns
          Depends on the CCB clock. So it will be better to keep clock-frequency property which is getting fixed via u-boot.   	

	    Agreed on the discussion of changing &quot;fsl,flexcan-v1.0&quot; to &quot;fsl,flexcan&quot;
	
&gt;<i> Please join the discussion on the mailing list helping to get this driver
</I>&gt;<i> mainline.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> 
</I>&gt;<i> Wolfgang.
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005922.html">[RFC 5/5] [powerpc] Implement a p1010rdb clock source.
</A></li>
	<LI>Next message: <A HREF="005932.html">[RFC 5/5] [powerpc] Implement a p1010rdb clock source.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5928">[ date ]</a>
              <a href="thread.html#5928">[ thread ]</a>
              <a href="subject.html#5928">[ subject ]</a>
              <a href="author.html#5928">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
