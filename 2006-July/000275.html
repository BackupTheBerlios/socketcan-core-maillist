<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> version info
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2006-July/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20version%20info&In-Reply-To=%3C20060706135141.GT6375%40pengutronix.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000274.html">
   <LINK REL="Next"  HREF="000276.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>version info</H1>
    <B>Robert Schwebel</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20version%20info&In-Reply-To=%3C20060706135141.GT6375%40pengutronix.de%3E"
       TITLE="version info">r.schwebel at pengutronix.de
       </A><BR>
    <I>Thu Jul  6 15:51:41 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000274.html">version info
</A></li>
        <LI>Next message: <A HREF="000276.html">version info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#275">[ date ]</a>
              <a href="thread.html#275">[ thread ]</a>
              <a href="subject.html#275">[ subject ]</a>
              <a href="author.html#275">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Jul 06, 2006 at 03:39:13PM +0200, Urs Thuermann wrote:
&gt;<i> Where should the version info go, which is currently in net/can/version.h?
</I>&gt;<i> We'd like to further have some version strings printed when a module
</I>&gt;<i> is loaded.  This version string could be a manually incremented
</I>&gt;<i> release number, like LLCF-2.0-pre2, or the SVN revision number.
</I>&gt;<i> 
</I>&gt;<i> * Using the SVN revision number is difficult, since the $Id$ and
</I>&gt;<i>   $Revision$ strings in files represent only the revision number this
</I>&gt;<i>   file was last changed.  This is useless if the module consists of
</I>&gt;<i>   more than one source file.
</I>&gt;<i> 
</I>&gt;<i>   The svnversion command should not be part of the build process,
</I>&gt;<i>   since it can only be used in a SVN working copy.  This is the
</I>&gt;<i>   solution presented in the FAQ.
</I>&gt;<i> 
</I>&gt;<i>   I don't see any other easy way to get the revision number of the
</I>&gt;<i>   directory into the module object file.
</I>&gt;<i> 
</I>&gt;<i> * We could keep a version.h and move it to include/linux/can/version.h,
</I>&gt;<i>   where it could be included from net/can and drivers/net/can/*.
</I>&gt;<i>   version.h would then contain a manually updated release number, like
</I>&gt;<i>   we have it now.  One release number for can core, raw, bcm, and
</I>&gt;<i>   drivers makes again sense, since the CAN drivers now depend on
</I>&gt;<i>   can_device.c which lives in net/can.
</I>&gt;<i> 
</I>&gt;<i> * Each module gets its own version number, updated manually and
</I>&gt;<i>   independently.  OK, forget this.  I enumerated this here only for
</I>&gt;<i>   completeness.
</I>&gt;<i> 
</I>&gt;<i> * Other suggestions?
</I>
Revisions imply that there are release cycles being done. I don't think
that makes much sense at the moment, at least not for the community
tree. So just go ahead with your current solution if you need such a
number. 

What I would definitely prefer is to have some user space API revision
visible somewhere in sysfs, so that for example canutils can determine
which revision of the CAN mechanism they are working against. But the
workflow would probably be 

	- write spec according to the current implementation
	- attach a version number to that spec
	- audit the code against it

Robert
-- 
 Dipl.-Ing. Robert Schwebel | <A HREF="http://www.pengutronix.de">http://www.pengutronix.de</A>
 Pengutronix - Linux Solutions for Science and Industry
   Handelsregister:  Amtsgericht Hildesheim, HRA 2686
     Hannoversche Str. 2, 31134 Hildesheim, Germany
   Phone: +49-5121-206917-0 |  Fax: +49-5121-206917-9


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000274.html">version info
</A></li>
	<LI>Next message: <A HREF="000276.html">version info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#275">[ date ]</a>
              <a href="thread.html#275">[ thread ]</a>
              <a href="subject.html#275">[ subject ]</a>
              <a href="author.html#275">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
