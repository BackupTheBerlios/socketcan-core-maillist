<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> RFC: CAN state management
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2007-December/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20RFC%3A%20CAN%20state%20management&In-Reply-To=%3C20071205212303.7e074583%40dilbert.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000937.html">
   <LINK REL="Next"  HREF="000939.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>RFC: CAN state management</H1>
    <B>Hans-J&#252;rgen Koch</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20RFC%3A%20CAN%20state%20management&In-Reply-To=%3C20071205212303.7e074583%40dilbert.local%3E"
       TITLE="RFC: CAN state management">hjk at linutronix.de
       </A><BR>
    <I>Wed Dec  5 21:23:03 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000937.html">RFC: CAN state management
</A></li>
        <LI>Next message: <A HREF="000939.html">RFC: CAN state management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#938">[ date ]</a>
              <a href="thread.html#938">[ thread ]</a>
              <a href="subject.html#938">[ subject ]</a>
              <a href="author.html#938">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Am Wed, 05 Dec 2007 21:02:47 +0100
schrieb Wolfgang Grandegger &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">wg at grandegger.com</A>&gt;:

[...]
&gt;<i> &gt; 
</I>&gt;<i> &gt; typedef enum {
</I>&gt;<i> &gt;         CAN_STATE_ACTIVE = 0,
</I>&gt;<i> &gt;         CAN_STATE_SCANNING_BITRATE,
</I>&gt;<i> &gt;         CAN_STATE_STOPPED,
</I>&gt;<i> &gt;         CAN_STATE_SLEEPING
</I>&gt;<i> &gt; } can_state_t;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; typedef enum {
</I>&gt;<i> &gt;         CAN_MODE_STOP = 0,
</I>&gt;<i> &gt;         CAN_MODE_START,
</I>&gt;<i> &gt; 	CAN_MODE_SCAN,
</I>&gt;<i> &gt;         CAN_MODE_SLEEP
</I>&gt;<i> &gt; } can_mode_t;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; typedef enum {
</I>&gt;<i> &gt;         CAN_STATE_BUS_NO_ERR = 0,
</I>&gt;<i> &gt;         CAN_STATE_BUS_PASSIVE,
</I>&gt;<i> &gt;         CAN_STATE_BUS_OFF
</I>&gt;<i> &gt; } can_error_state_t;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Comments?
</I>&gt;<i> 
</I>&gt;<i> I do not see a benefit of separating CAN controller states and error
</I>&gt;<i> states. It's just one more variable to manage. We may need to save the
</I>&gt;<i> state before sleeping, though. Other opinions?
</I>
I completely agree, separating states and errors doesn't make sense,
especially as not all combinations of the two are valid.

Saving the state before going to sleep depends on the hardware and is
therefore a driver issue. Most drivers won't need it as the state will
change on wakeup anyway.

Hans

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000937.html">RFC: CAN state management
</A></li>
	<LI>Next message: <A HREF="000939.html">RFC: CAN state management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#938">[ date ]</a>
              <a href="thread.html#938">[ thread ]</a>
              <a href="subject.html#938">[ subject ]</a>
              <a href="author.html#938">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
