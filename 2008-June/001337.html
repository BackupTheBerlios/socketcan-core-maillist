<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> More on bit time setting and calculation...
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20More%20on%20bit%20time%20setting%20and%20calculation...&In-Reply-To=%3C20080609091900.GS10115%40pengutronix.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001332.html">
   <LINK REL="Next"  HREF="001340.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>More on bit time setting and calculation...</H1>
    <B>Robert Schwebel</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20More%20on%20bit%20time%20setting%20and%20calculation...&In-Reply-To=%3C20080609091900.GS10115%40pengutronix.de%3E"
       TITLE="More on bit time setting and calculation...">r.schwebel at pengutronix.de
       </A><BR>
    <I>Mon Jun  9 11:19:00 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001332.html">More on bit time setting and calculation...
</A></li>
        <LI>Next message: <A HREF="001340.html">More on bit time setting and calculation...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1337">[ date ]</a>
              <a href="thread.html#1337">[ thread ]</a>
              <a href="subject.html#1337">[ subject ]</a>
              <a href="author.html#1337">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Jun 09, 2008 at 10:30:50AM +0200, Wolfgang Grandegger wrote:
&gt;<i> &gt; Well, if *all* CAN drivers need this and it makes a convenient userspace
</I>&gt;<i> &gt; interface without the need to create new maintenance dependencies, it
</I>&gt;<i> &gt; may be worth the effort.
</I>&gt;<i>
</I>&gt;<i> Not all will need it, e.g. some intelligent cards have built-in btreg
</I>&gt;<i> tables. It may be worth if we can do a good job and if the calculation
</I>&gt;<i> is still simple, but I doubt that we can do it.
</I>
What I mean is if all directly cpu-connected CAN controllers need a
&quot;bitrate to parameterset&quot; function, we should provide the infrastructure
for that.

&gt;<i> The proposed standard model to define the bit timing in an hardware
</I>&gt;<i> independent way is still &quot;good&quot; but to sophisticated and error prune
</I>&gt;<i> to be put into the kernel. It would delay kernel inclusion
</I>&gt;<i> substantially, I believe. Therefore I'm clearly in favor of a
</I>&gt;<i> user-space tool/lib for that purpose.
</I>
Hmm. The problem I see here is that, if you provide only an interface
to push hardware-dependend values down to the kernel, userspace needs to
know about *any* supported hardware chip. And that's really, really
uggly. I doubt that kernel people will be happy with it (we are not).

Assume for example that one has a CAN analyzer and wants to move the
sample point; the analyzer usually outputs the standard parameter set.
You had to translate that to register values by exactly knowing about
the hardware details in userspace. No good solution, IMHO ...

On the other hand: with the standard model, you specify the TQ and get
back the relative error. So I'm wondering, if TQ could only be
determinded with a certain error, if it is possible at all to get better
values by directly specifying btreg values.

So I still fail to see the advantage here.

rsc
-- 
 Dipl.-Ing. Robert Schwebel | <A HREF="http://www.pengutronix.de">http://www.pengutronix.de</A>
 Pengutronix - Linux Solutions for Science and Industry
   Handelsregister:  Amtsgericht Hildesheim, HRA 2686
     Hannoversche Str. 2, 31134 Hildesheim, Germany
   Phone: +49-5121-206917-0 |  Fax: +49-5121-206917-9


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001332.html">More on bit time setting and calculation...
</A></li>
	<LI>Next message: <A HREF="001340.html">More on bit time setting and calculation...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1337">[ date ]</a>
              <a href="thread.html#1337">[ thread ]</a>
              <a href="subject.html#1337">[ subject ]</a>
              <a href="author.html#1337">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
