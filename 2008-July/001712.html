<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Again bit time settings
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2008-July/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20Again%20bit%20time%20settings&In-Reply-To=%3C487DCBA4.6050700%40eia.be%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001711.html">
   <LINK REL="Next"  HREF="001713.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Again bit time settings</H1>
    <B>Kurt Van Dijck</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20Again%20bit%20time%20settings&In-Reply-To=%3C487DCBA4.6050700%40eia.be%3E"
       TITLE="Again bit time settings">kurt.van.dijck at eia.be
       </A><BR>
    <I>Wed Jul 16 12:21:24 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001711.html">Again bit time settings
</A></li>
        <LI>Next message: <A HREF="001713.html">AT91 SoC CAN controller device driver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1712">[ date ]</a>
              <a href="thread.html#1712">[ thread ]</a>
              <a href="subject.html#1712">[ subject ]</a>
              <a href="author.html#1712">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>My previous post attempt failed in the mailing list, so here is it again
(slightly modified, I thrashed the outgoing).

Sorry for the confusion with regard to sync_seg &amp; sjw I caused.
I studied the bosch CAN2.0 spec.
sync_seg != sjw
sync_seg is always 1, and is not needed in sysfs
sjw is 1..4, and not used in actual bitrate calculation. However, it has constraints
with the bitrate.

I had 1 remark on the diagram. putting btr_tq is trivial, but it is related to the can_clock,
as btr_tq must come from can_clock divided by brp, where brp is a whole number.
As such, can_clock is a prerequisite for btr_xxxx values.
Bosch CAN2.0 talks about a min_tq value, which is 1/can_clock.
A typical driver can make btr_brp as btr_tq/min_tq.

Oliver Hartkopp wrote:
&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> thanks for picking up the topic again. Meanwhile i really got confused
</I>&gt;<i> about all the discussions but this HW independed value setting is
</I>&gt;<i> definitely the right approach. As there are also opinions to supply an
</I>&gt;<i> 'easy' non-expert can_birate setting inside the kernel, i tried to put
</I>&gt;<i> all this into a PDF (and an Open Office presentation), i have attached
</I>&gt;<i> to this mail. IMO we may also skip the Kernel internal bitrate
</I>&gt;<i> calculation function(s) ...
</I>This looks like a solution. More userspace programs can emerge, fitting each one's needs.
&gt;<i> 
</I>&gt;<i> Does this fit to your needs and expectations?
</I>&gt;<i> Feel free to modify the Open Office presentation and re-post it.
</I>I tried, but it's too big.
&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Oliver
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001711.html">Again bit time settings
</A></li>
	<LI>Next message: <A HREF="001713.html">AT91 SoC CAN controller device driver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1712">[ date ]</a>
              <a href="thread.html#1712">[ thread ]</a>
              <a href="subject.html#1712">[ subject ]</a>
              <a href="author.html#1712">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
