<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Again bit time settings
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2008-July/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20Again%20bit%20time%20settings&In-Reply-To=%3C1216795889.3565.24.camel%40pc-mob-grv-deb%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001742.html">
   <LINK REL="Next"  HREF="001744.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Again bit time settings</H1>
    <B>Vladislav Gribov</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20Again%20bit%20time%20settings&In-Reply-To=%3C1216795889.3565.24.camel%40pc-mob-grv-deb%3E"
       TITLE="Again bit time settings">gribov at ixxat.de
       </A><BR>
    <I>Wed Jul 23 08:51:26 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001742.html">Again bit time settings
</A></li>
        <LI>Next message: <A HREF="001744.html">Again bit time settings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1743">[ date ]</a>
              <a href="thread.html#1743">[ thread ]</a>
              <a href="subject.html#1743">[ subject ]</a>
              <a href="author.html#1743">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2008-07-22 at 09:57 +0200, Robert Schwebel wrote:
&gt;<i> On Tue, Jul 22, 2008 at 09:47:55AM +0200, Wolfgang Grandegger wrote:
</I>&gt;<i> &gt; The user has to set the bit-timing parameters tq, prop_seg, etc. directly.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Will it make on the fly a new table?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; No. The driver just tries to calculate a reasonable brp and print a
</I>&gt;<i> &gt; warning message if there is a bit-rate error.
</I>&gt;<i> 
</I>&gt;<i> Which leads us back to my original proposal: why not make it possible to
</I>&gt;<i> define the table from userspace? That's what Wolfgang calls &quot;indirect
</I>&gt;<i> table&quot;. The user would be able to define a bit-timing parameter set
</I>&gt;<i> which is *labled* after the corresponding bitrate (or whatever one might
</I>&gt;<i> invent) and is selected via the corresponding bit-time entry.
</I>&gt;<i> 
</I>
This is what you have done for MSCAN, correct?
I like this approach and this is what I mean when I talk about bit rate 
tables.

This approach may be compared with ModeLine option of the xfree86 
configuration file. With ModeLine the screen resolution is defined over 
some magic numbers (like tw, propseg etc in our case) which are readable only 
by expert. And a label is given to the defined screen resolution like 
&quot;1024x768&quot;, and this label is just perfect to use by everyone.

For me the bit timing table shall be defined in the same manner. It is 
not a part of driver, it is a part of the configuration. The table is 
loaded to the driver from the user space, and may be generated by the 
advanced tool or just manually by the expert. Of course for the CAN 
controllers like SJA1000 and typical CAN clock like 8, 12, 16, 20, 33 Mhz 
we can provide configuration with a driver. And if some user have it 
running with 25 Mhz, he just edits configuration file and is not forced to 
recompile the driver. And another important point is to provide the definition 
of the bit rate in an hardware independent way (I guess we have already 
achieved a consensus on that issue).

So just like ModeLine: graphic cards from different manufacturer are 
configured over are common set of values (hw independent) and to have
it easier to handle you just give a label to some setting and do reference
by name.

Regards,
Vladislav



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001742.html">Again bit time settings
</A></li>
	<LI>Next message: <A HREF="001744.html">Again bit time settings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1743">[ date ]</a>
              <a href="thread.html#1743">[ thread ]</a>
              <a href="subject.html#1743">[ subject ]</a>
              <a href="author.html#1743">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
