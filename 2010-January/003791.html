<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Driver problems with can_put_echo_skb() when loopback is disabled
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2010-January/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20Driver%20problems%20with%20can_put_echo_skb%28%29%20when%20loopback%20is%20disabled&In-Reply-To=%3C4B46EC9E.5090505%40esd.eu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003785.html">
   <LINK REL="Next"  HREF="003792.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Driver problems with can_put_echo_skb() when loopback is disabled</H1>
    <B>Thomas K&#246;rper</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20Driver%20problems%20with%20can_put_echo_skb%28%29%20when%20loopback%20is%20disabled&In-Reply-To=%3C4B46EC9E.5090505%40esd.eu%3E"
       TITLE="Driver problems with can_put_echo_skb() when loopback is disabled">thomas.koerper at esd.eu
       </A><BR>
    <I>Fri Jan  8 09:28:14 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003785.html">[PATCH net-next v4 3/3] powerpc/mpc5xxx: add OF platform binding doc	for FSL MSCAN devices
</A></li>
        <LI>Next message: <A HREF="003792.html">Driver problems with can_put_echo_skb() when loopback is disabled
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3791">[ date ]</a>
              <a href="thread.html#3791">[ thread ]</a>
              <a href="subject.html#3791">[ subject ]</a>
              <a href="author.html#3791">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I recently worked with the esd PCI/331 driver (esd_pci331.c) and found
some problems there when loopback is disabled. (e.g. just with &quot;cangen -x&quot;)

In the esd331_start_xmit() function I was told to call can_put_echo_skb()
before sending the frame But it seems the skb is freed there when loopback
is disabled (cause it's not needed anymore?)

So when that frame is sent afterwards it contains just junk...

Should I just copy the frame before calling can_put_echo_skb()? Or is
something else wrong here?

Regards,
	Thomas

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003785.html">[PATCH net-next v4 3/3] powerpc/mpc5xxx: add OF platform binding doc	for FSL MSCAN devices
</A></li>
	<LI>Next message: <A HREF="003792.html">Driver problems with can_put_echo_skb() when loopback is disabled
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3791">[ date ]</a>
              <a href="thread.html#3791">[ thread ]</a>
              <a href="subject.html#3791">[ subject ]</a>
              <a href="author.html#3791">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
