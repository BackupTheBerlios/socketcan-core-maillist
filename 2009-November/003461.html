<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [PATCH] add MPC512x support to mscan
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%5D%20add%20MPC512x%20support%20to%20mscan&In-Reply-To=%3C20091112125544.GB18931%40pengutronix.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003460.html">
   <LINK REL="Next"  HREF="003462.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[PATCH] add MPC512x support to mscan</H1>
    <B>Wolfram Sang</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%5D%20add%20MPC512x%20support%20to%20mscan&In-Reply-To=%3C20091112125544.GB18931%40pengutronix.de%3E"
       TITLE="[PATCH] add MPC512x support to mscan">w.sang at pengutronix.de
       </A><BR>
    <I>Thu Nov 12 13:55:44 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003460.html">[PATCH] add MPC512x support to mscan
</A></li>
        <LI>Next message: <A HREF="003462.html">[PATCH] add MPC512x support to mscan
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3461">[ date ]</a>
              <a href="thread.html#3461">[ thread ]</a>
              <a href="subject.html#3461">[ subject ]</a>
              <a href="author.html#3461">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Wolfgang,

On Mon, Nov 02, 2009 at 08:23:41PM +0100, Wolfgang Grandegger wrote:
&gt;<i> Hi Wolfram,
</I>&gt;<i> 
</I>&gt;<i> what is your plan now? Provide patches for mainline inclusion
</I>&gt;<i> (net-next-2.6) or for the Socket-CAN SVN trunk? Please don't send
</I>&gt;<i> patches for both. We can do the backport to the SVN trunk later.
</I>
I changed my plans a bit. I'd now like to concentrate on MPC52xx only, bring
that to mainline and add MPC512x support, when we the clocking issues have
settled upstream. I still have all the patches for adding MPC512x anytime, and
they just need one hook inside the driver, so no big reorganization is needed
then. Are you okay with this, more incremental, approach?

&gt;<i> What's also missing is the proper bus-off recovery method for the
</I>&gt;<i> MCP512x. Unfortunately, it's also not yet OK for the MPC5200. It should
</I>&gt;<i> be implemented as listed below:
</I>&gt;<i> 
</I>&gt;<i> - if possible, automatic bus-off recovery should be turned off, which
</I>&gt;<i>   is possible on the MPC512x (but not the default for compatibility with
</I>&gt;<i>   the MPC5200.
</I>&gt;<i> 
</I>&gt;<i> - if bus-off recovery cannot be switched of, the driver should handle it
</I>&gt;<i>   as follows:
</I>&gt;<i> 
</I>&gt;<i>   - if restart_ms == 0, the device should be stopped on bus-off to
</I>&gt;<i>     suppress automatic recovery.
</I>&gt;<i> 
</I>&gt;<i>   - if restart_ms &gt; 0, the hardware should do the automatic recovery and
</I>&gt;<i>     a RESTARTED error message should be sent when it re-enters the
</I>&gt;<i>     error-active state (or leaves the bus-off state).
</I>
I am a bit puzzled here: Fu just showed me that it is already implemented like
this? Or what exactly is missing?

Regards,

   Wolfram

-- 
Pengutronix e.K.                           | Wolfram Sang                |
Industrial Linux Solutions                 | <A HREF="http://www.pengutronix.de/">http://www.pengutronix.de/</A>  |
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/socketcan-core/attachments/20091112/942c58df/attachment.pgp">https://lists.berlios.de/pipermail/socketcan-core/attachments/20091112/942c58df/attachment.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003460.html">[PATCH] add MPC512x support to mscan
</A></li>
	<LI>Next message: <A HREF="003462.html">[PATCH] add MPC512x support to mscan
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3461">[ date ]</a>
              <a href="thread.html#3461">[ thread ]</a>
              <a href="subject.html#3461">[ subject ]</a>
              <a href="author.html#3461">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
