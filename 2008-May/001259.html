<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> RFC: Hardware independent bit timing
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2008-May/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20RFC%3A%20Hardware%20independent%20bit%20timing&In-Reply-To=%3C483EC086.4040308%40hartkopp.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001258.html">
   <LINK REL="Next"  HREF="001260.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>RFC: Hardware independent bit timing</H1>
    <B>Oliver Hartkopp</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20RFC%3A%20Hardware%20independent%20bit%20timing&In-Reply-To=%3C483EC086.4040308%40hartkopp.net%3E"
       TITLE="RFC: Hardware independent bit timing">socketcan at hartkopp.net
       </A><BR>
    <I>Thu May 29 16:41:10 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001258.html">RFC: Hardware independent bit timing
</A></li>
        <LI>Next message: <A HREF="001260.html">RFC: Hardware independent bit timing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1259">[ date ]</a>
              <a href="thread.html#1259">[ thread ]</a>
              <a href="subject.html#1259">[ subject ]</a>
              <a href="author.html#1259">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Wolfgang Grandegger wrote:
&gt;<i> Oliver Hartkopp wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hm - this is an interesting approach to 'overrule' the potentially
</I>&gt;&gt;<i> calculated btr values with presets. I just thought it to be much simpler:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> echo 0x4114 &gt; /sys/.../can_btregs (for 500kBit <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">SJA1000 at 16MHz</A>)
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Well, I find that confusing.
</I>&gt;<i>   
</I>
I find that extremely straight forward as you (as an expert) can see 
directly what is pushed into the controller.

&gt;<i>   
</I>&gt;&gt;<i> So we would have the non-expert setting (/sys/.../can_bitrate) and the
</I>&gt;&gt;<i> direct setting for CAN-experts (/sys/.../can_btregs).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> And how these btregs are calculated depends on the expert ;-)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I don't know if the changing of bitrates is a common use-case at system
</I>&gt;&gt;<i> runtime. Normally i set the bitrate once after booting. Pushing a table
</I>&gt;&gt;<i> into can_btregs could be interesting, when 'normal users' need to change
</I>&gt;&gt;<i> the bitrates several times and would like to use /sys/.../can_bitrate
</I>&gt;&gt;<i> for this. In this case the 'overruled' settings may come into play.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> What I propose is to have a table of bt-regs for various bitrates, which
</I>&gt;<i> are pre-set by the driver and can then be changed by writing to
</I>&gt;<i> /sys/.../can_btregs. The actual setting can then be activated with
</I>&gt;<i> /sys/.../can_bitrate, as usual.
</I>&gt;<i>   
</I>
Ok - and is this suggested table hardcoded in the driver or is the table 
build (with the 'simple' algorithm) at driver startup? (In any case this 
could be driver depended ...)

Oliver.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001258.html">RFC: Hardware independent bit timing
</A></li>
	<LI>Next message: <A HREF="001260.html">RFC: Hardware independent bit timing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1259">[ date ]</a>
              <a href="thread.html#1259">[ thread ]</a>
              <a href="subject.html#1259">[ subject ]</a>
              <a href="author.html#1259">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
