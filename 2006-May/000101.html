<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-core] SIOC* IOCTL requests
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2006-May/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-core%5D%20SIOC%2A%20IOCTL%20requests&In-Reply-To=%3C20060524091613.GA28093%40pengutronix.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000100.html">
   <LINK REL="Next"  HREF="000104.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-core] SIOC* IOCTL requests</H1>
    <B>Robert Schwebel</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-core%5D%20SIOC%2A%20IOCTL%20requests&In-Reply-To=%3C20060524091613.GA28093%40pengutronix.de%3E"
       TITLE="[Socketcan-core] SIOC* IOCTL requests">r.schwebel at pengutronix.de
       </A><BR>
    <I>Wed May 24 11:16:13 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000100.html">[Socketcan-core] SIOC* IOCTL requests
</A></li>
        <LI>Next message: <A HREF="000104.html">[Socketcan-core] SIOC* IOCTL requests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#101">[ date ]</a>
              <a href="thread.html#101">[ thread ]</a>
              <a href="subject.html#101">[ subject ]</a>
              <a href="author.html#101">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, May 23, 2006 at 04:59:13PM +0400, Andrey Volkov wrote:
&gt;<i> &gt; &gt; As David propose before, parameters of this ioctls must
</I>&gt;<i> &gt; &gt; be only one u32 value (baudrate itself).
</I>&gt;<i> 
</I>&gt;<i> &gt; Setting the baudrate via BTR0/BTR1 is also quite common.
</I>&gt;<i> For the SJA. But not for a last time produced controllers.
</I>
The CAN experts we talked to told us that you _need_ to be able to
modify bit timings, because there are applications where the timings are
being measured and standard values cannot fulfill the requirements. So
the API needs to provide both methods, single baudrate + separate
timings. They also said that there probably will be no sane abstraction
other than &quot;if you don't set the baudrate, set a driver and chip
specific value pair which influences the bit timings in a hardware
specific and documented way&quot;.

&gt;<i> As ex. check Atmel AT91CAN129, Freescale TouCAN based MPCs and
</I>&gt;<i> Analog Devices Blackfin 5xx.
</I>&gt;<i> They all use prop_seg/phase1_seg/phase2_seg for a bit time
</I>&gt;<i> configuration. So it will be better if we will export bittime
</I>&gt;<i> to the user space in generic &quot;bits per secs&quot; (which, IMHO,
</I>&gt;<i> is preferred), or in canonical, CAN-2.0 described,
</I>&gt;<i> sjw/phase_seg... form, but not in SJA-related BTRs form.
</I>
Is it possible to use this abstraction for all insane CAN hardware which
happens to exist?

Robert 
-- 
 Dipl.-Ing. Robert Schwebel | <A HREF="http://www.pengutronix.de">http://www.pengutronix.de</A>
 Pengutronix - Linux Solutions for Science and Industry
   Handelsregister:  Amtsgericht Hildesheim, HRA 2686
     Hannoversche Str. 2, 31134 Hildesheim, Germany
   Phone: +49-5121-206917-0 |  Fax: +49-5121-206917-9


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000100.html">[Socketcan-core] SIOC* IOCTL requests
</A></li>
	<LI>Next message: <A HREF="000104.html">[Socketcan-core] SIOC* IOCTL requests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#101">[ date ]</a>
              <a href="thread.html#101">[ thread ]</a>
              <a href="subject.html#101">[ subject ]</a>
              <a href="author.html#101">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
