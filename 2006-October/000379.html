<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> RFC Loopback implementation
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2006-October/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20RFC%20Loopback%20implementation&In-Reply-To=%3C453746ED.5010307%40grandegger.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000375.html">
   <LINK REL="Next"  HREF="000381.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>RFC Loopback implementation</H1>
    <B>Wolfgang Grandegger</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20RFC%20Loopback%20implementation&In-Reply-To=%3C453746ED.5010307%40grandegger.com%3E"
       TITLE="RFC Loopback implementation">wg at grandegger.com
       </A><BR>
    <I>Thu Oct 19 11:35:41 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000375.html">RFC Loopback implementation
</A></li>
        <LI>Next message: <A HREF="000381.html">RFC Loopback implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#379">[ date ]</a>
              <a href="thread.html#379">[ thread ]</a>
              <a href="subject.html#379">[ subject ]</a>
              <a href="author.html#379">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Marc Kleine-Budde wrote:
&gt;<i> Jan Kiszka wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> - Does that controller push out frames in an unpredictable manner?
</I>&gt;<i> 
</I>&gt;<i> As least the documentation says it's a fifo. So answer is NO.
</I>&gt;<i> 
</I>&gt;&gt;<i> - Does it report transmitted frames or only an empty tx queue?
</I>&gt;<i> 
</I>&gt;<i> Empty TX queue emits an interrupt.
</I>
This depends on the hardware. On the MSCAN (3 buffers) and i82587 (14 
buffers) you get an interrupt for each TX message object done.

&gt;&gt;<i> - Does it force you to use queueing?
</I>&gt;<i> 
</I>&gt;<i> Nope - If you're happy with many interrupts you can push 1 frame into 
</I>&gt;<i> the queue and wait till it's transmitted. Just like a can controller 
</I>&gt;<i> that has only one buffer.
</I>&gt;<i> 
</I>&gt;<i> I'm not shure if I can sell this feature to our customers. Yes of course 
</I>&gt;<i> you've spent a lot of money to but a softcore with 32 hw-tx buffers, but 
</I>&gt;<i>   our framework can't use them :)
</I>
A already mentioned. A more clever filling and handling of the TX 
buffers could guarantee the order in which they got filled, at least on 
the i82587 and MSCAN. But for the sake of real-time it should be limited 
to 2-3 TX Buffers.

&gt;&gt;<i> And even if we cannot guarantee the precise order of frames on the wire
</I>&gt;&gt;<i> vs. those on the virtual local bus for every hardware, we should at
</I>&gt;&gt;<i> least try to couple the local delivery with the bus state. I.e. if you
</I>&gt;&gt;<i> pull the real CAN cable, no loopback should be performed.
</I>&gt;<i> 
</I>&gt;<i> If think this behaviour should be at least configurable. I don't think 
</I>&gt;<i> its always a feature if local apps stop working if the cable is
</I>
I agree.

&gt;&gt;<i> That's the model for loopback between distributed, node-agnostic
</I>&gt;&gt;<i> applications, so to say a virtual local CAN bus between them. That
</I>&gt;&gt;<i> feature should be controllable by the application, because not all of
</I>&gt;&gt;<i> them need it (to express it neutrally).
</I>&gt;<i> 
</I>&gt;<i> Marc
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Socketcan-core mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">Socketcan-core at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">https://lists.berlios.de/mailman/listinfo/socketcan-core</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000375.html">RFC Loopback implementation
</A></li>
	<LI>Next message: <A HREF="000381.html">RFC Loopback implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#379">[ date ]</a>
              <a href="thread.html#379">[ thread ]</a>
              <a href="subject.html#379">[ subject ]</a>
              <a href="author.html#379">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
