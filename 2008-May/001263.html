<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> sysfs setting of btr values - was Re: [PATCH v3 08/13] QLogic VNIC:	sysfs interface implementation
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2008-May/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20sysfs%20setting%20of%20btr%20values%20-%20was%20Re%3A%20%5BPATCH%20v3%2008/13%5D%20QLogic%20VNIC%3A%0A%09sysfs%20interface%20implementation&In-Reply-To=%3C483FA0AA.50407%40hartkopp.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001252.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>sysfs setting of btr values - was Re: [PATCH v3 08/13] QLogic VNIC:	sysfs interface implementation</H1>
    <B>Oliver Hartkopp</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20sysfs%20setting%20of%20btr%20values%20-%20was%20Re%3A%20%5BPATCH%20v3%2008/13%5D%20QLogic%20VNIC%3A%0A%09sysfs%20interface%20implementation&In-Reply-To=%3C483FA0AA.50407%40hartkopp.net%3E"
       TITLE="sysfs setting of btr values - was Re: [PATCH v3 08/13] QLogic VNIC:	sysfs interface implementation">socketcan at hartkopp.net
       </A><BR>
    <I>Fri May 30 08:37:30 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001252.html">mcp2515 driver?
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1263">[ date ]</a>
              <a href="thread.html#1263">[ thread ]</a>
              <a href="subject.html#1263">[ subject ]</a>
              <a href="author.html#1263">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Wolfgang,

this morning is found this mail below from Greg KH on netdev-ML.

Look's like that pushing tables of values into sysfs entries is a no go 
... :-(

This brings my suggestion back onto the table to just offer two sysfs 
entries:

&quot;So we would have the non-expert setting (/sys/.../can_bitrate) and the 
direct setting for CAN-experts (/sys/.../can_btregs).&quot;


8-&gt;


-------- Original Message --------
Subject: 	Re: [PATCH v3 08/13] QLogic VNIC: sysfs interface 
implementation for the driver
Date: 	Thu, 29 May 2008 10:48:05 -0700
From: 	Greg KH &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">greg at kroah.com</A>&gt;
To: 	Stephen Hemminger &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">shemminger at vyatta.com</A>&gt;
CC: 	Ramachandra K &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">ramachandra.kuchimanchi at qlogic.com</A>&gt;, 
<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">rdreier at cisco.com</A>, <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">general at lists.openfabrics.org</A>, 
<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">netdev at vger.kernel.org</A>, <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">poornima.kamath at qlogic.com</A>, 
<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">amar.mudrankit at qlogic.com</A>
References: 	&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">20080529095126.9943.84692.stgit at localhost.localdomain</A>&gt; 
&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">20080529095754.9943.27936.stgit at localhost.localdomain</A>&gt; 
&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">20080529103003.010c4a08 at extreme</A>&gt;



On Thu, May 29, 2008 at 10:30:03AM -0700, Stephen Hemminger wrote:
&gt;<i> On Thu, 29 May 2008 15:27:54 +0530
</I>&gt;<i> Ramachandra K &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">ramachandra.kuchimanchi at qlogic.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; From: Amar Mudrankit &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">amar.mudrankit at qlogic.com</A>&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The sysfs interface for the QLogic VNIC driver is implemented through
</I>&gt;<i> &gt; this patch.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Signed-off-by: Amar Mudrankit &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">amar.mudrankit at qlogic.com</A>&gt;
</I>&gt;<i> &gt; Signed-off-by: Ramachandra K &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">ramachandra.kuchimanchi at qlogic.com</A>&gt;
</I>&gt;<i> &gt; Signed-off-by: Poornima Kamath &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">poornima.kamath at qlogic.com</A>&gt;
</I>&gt;<i> &gt; ---
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  drivers/infiniband/ulp/qlgc_vnic/vnic_sys.c | 1133 +++++++++++++++++++++++++++
</I>&gt;<i> &gt;  drivers/infiniband/ulp/qlgc_vnic/vnic_sys.h |   51 +
</I>&gt;<i> &gt;  2 files changed, 1184 insertions(+), 0 deletions(-)
</I>&gt;<i> &gt;  create mode 100644 drivers/infiniband/ulp/qlgc_vnic/vnic_sys.c
</I>&gt;<i> &gt;  create mode 100644 drivers/infiniband/ulp/qlgc_vnic/vnic_sys.h
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; diff --git a/drivers/infiniband/ulp/qlgc_vnic/vnic_sys.c b/drivers/infiniband/ulp/qlgc_vnic/vnic_sys.c
</I>&gt;<i> &gt; new file mode 100644
</I>&gt;<i> &gt; index 0000000..40b3c77
</I>&gt;<i>(..)
</I>&gt;<i> &gt; +/*
</I>&gt;<i> &gt; + * target eiocs are added by writing
</I>&gt;<i> &gt; + *
</I>&gt;<i> &gt; + * ioc_guid=&lt;EIOC GUID&gt;,dgid=&lt;dest GID&gt;,pkey=&lt;P_key&gt;,name=&lt;interface_name&gt;
</I>&gt;<i> &gt; + * to the create_primary  sysfs attribute.
</I>&gt;<i> &gt; + */
</I>&gt;<i> &gt; +enum {
</I>&gt;<i> &gt; +	VNIC_OPT_ERR = 0,
</I>&gt;<i> &gt; +	VNIC_OPT_IOC_GUID = 1 &lt;&lt; 0,
</I>&gt;<i> &gt; +	VNIC_OPT_DGID = 1 &lt;&lt; 1,
</I>&gt;<i> &gt; +	VNIC_OPT_PKEY = 1 &lt;&lt; 2,
</I>&gt;<i> &gt; +	VNIC_OPT_NAME = 1 &lt;&lt; 3,
</I>&gt;<i> &gt; +	VNIC_OPT_INSTANCE = 1 &lt;&lt; 4,
</I>&gt;<i> &gt; +	VNIC_OPT_RXCSUM = 1 &lt;&lt; 5,
</I>&gt;<i> &gt; +	VNIC_OPT_TXCSUM = 1 &lt;&lt; 6,
</I>&gt;<i> &gt; +	VNIC_OPT_HEARTBEAT = 1 &lt;&lt; 7,
</I>&gt;<i> &gt; +	VNIC_OPT_IOC_STRING = 1 &lt;&lt; 8,
</I>&gt;<i> &gt; +	VNIC_OPT_IB_MULTICAST = 1 &lt;&lt; 9,
</I>&gt;<i> &gt; +	VNIC_OPT_ALL = (VNIC_OPT_IOC_GUID |
</I>&gt;<i> &gt; +			VNIC_OPT_DGID | VNIC_OPT_NAME | VNIC_OPT_PKEY),
</I>&gt;<i> &gt; +};
</I>&gt;<i> &gt; +
</I>&gt;<i> &gt; +static match_table_t vnic_opt_tokens = {
</I>&gt;<i> &gt; +	{VNIC_OPT_IOC_GUID, &quot;ioc_guid=%s&quot;},
</I>&gt;<i> &gt; +	{VNIC_OPT_DGID, &quot;dgid=%s&quot;},
</I>&gt;<i> &gt; +	{VNIC_OPT_PKEY, &quot;pkey=%x&quot;},
</I>&gt;<i> &gt; +	{VNIC_OPT_NAME, &quot;name=%s&quot;},
</I>&gt;<i> &gt; +	{VNIC_OPT_INSTANCE, &quot;instance=%d&quot;},
</I>&gt;<i> &gt; +	{VNIC_OPT_RXCSUM, &quot;rx_csum=%s&quot;},
</I>&gt;<i> &gt; +	{VNIC_OPT_TXCSUM, &quot;tx_csum=%s&quot;},
</I>&gt;<i> &gt; +	{VNIC_OPT_HEARTBEAT, &quot;heartbeat=%d&quot;},
</I>&gt;<i> &gt; +	{VNIC_OPT_IOC_STRING, &quot;ioc_string=\&quot;%s&quot;},
</I>&gt;<i> &gt; +	{VNIC_OPT_IB_MULTICAST, &quot;ib_multicast=%s&quot;},
</I>&gt;<i> &gt; +	{VNIC_OPT_ERR, NULL}
</I>&gt;<i> &gt; +};
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> No sysfs is supposed to be one value per file use separate attributes
</I>&gt;<i> for each one. This also eliminates the parsing code.
</I>
Also, every new sysfs file needs to have an entry in Documentation/ABI/
which shows how to use it and what the contents are.

And yes, multiple values per sysfs file are not allowed, sorry, please
change this.  If you need to configure your device through an interface
like this, consider using configfs instead, that is what it is there
for.

thanks,

greg k-h


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001252.html">mcp2515 driver?
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1263">[ date ]</a>
              <a href="thread.html#1263">[ thread ]</a>
              <a href="subject.html#1263">[ subject ]</a>
              <a href="author.html#1263">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
