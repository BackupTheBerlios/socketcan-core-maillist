<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [PATCH 1/1]: Support EMS CPC-CARD
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%201/1%5D%3A%20Support%20EMS%20CPC-CARD&In-Reply-To=%3C485918C6.6020008%40volkswagen.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001552.html">
   <LINK REL="Next"  HREF="001555.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[PATCH 1/1]: Support EMS CPC-CARD</H1>
    <B>Oliver Hartkopp</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%201/1%5D%3A%20Support%20EMS%20CPC-CARD&In-Reply-To=%3C485918C6.6020008%40volkswagen.de%3E"
       TITLE="[PATCH 1/1]: Support EMS CPC-CARD">oliver.hartkopp at volkswagen.de
       </A><BR>
    <I>Wed Jun 18 16:16:38 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001552.html">[PATCH 1/1]: Support EMS CPC-CARD
</A></li>
        <LI>Next message: <A HREF="001555.html">[PATCH 1/1]: Support EMS CPC-CARD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1554">[ date ]</a>
              <a href="thread.html#1554">[ thread ]</a>
              <a href="subject.html#1554">[ subject ]</a>
              <a href="author.html#1554">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Wolfgang Grandegger wrote:
&gt;<i>
</I>&gt;<i> Sebastian Haas wrote:
</I>&gt;<i> &gt; Wolfgang Grandegger schrieb:
</I>&gt;<i> &gt;&gt; Sebastian Haas wrote:
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; Nevertheless, you could also achieve this by disabling and re-enabling
</I>&gt;<i> &gt;&gt; the IRQ of the other device at the beginning and end of the ISR. You
</I>&gt;<i> &gt;&gt; could use the pre_irq and post_irq callbacks for that purpose.
</I>&gt;<i> &gt; That's worth a try. If we disable them in pre_irq, I think the IRQ 
</I>&gt;<i> active bits
</I>&gt;<i> &gt; disappears and hence the sja1000_interrupt returns immediately, 
</I>&gt;<i> isn't it?
</I>&gt;<i>
</I>&gt;<i> This needs some more careful evaluation. Will check the SJA1000 later
</I>&gt;<i> today.
</I>&gt;<i>
</I>
IMO the problem hides in the sentence:

&quot;by disabling and re-enabling the IRQ of the other device&quot;

How to get the 'other device'?

My approach for my ugly twinepp driver was to link the two devices 
together (priv-&gt;twin was the pointer to the other netdevice).

So we could build up a chain of devices that belong together, and then 
we still would come with only one master device registering the 
interrupt line for the several interfaces.
All this made Sabastians approach reasonable to me,  not to register the 
interrupt for a net_device* but to register his own structure (struct 
ems_pcmcia_card *card) that knows all the belonging CAN interfaces.

Oliver


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001552.html">[PATCH 1/1]: Support EMS CPC-CARD
</A></li>
	<LI>Next message: <A HREF="001555.html">[PATCH 1/1]: Support EMS CPC-CARD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1554">[ date ]</a>
              <a href="thread.html#1554">[ thread ]</a>
              <a href="subject.html#1554">[ subject ]</a>
              <a href="author.html#1554">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
