<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Self-reception
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2010-October/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20Self-reception&In-Reply-To=%3C166589D0B9DD2547A1319599B9BADA1F5A9F6E%40vsv-exchange.ixxat.intranet.priv%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004721.html">
   <LINK REL="Next"  HREF="004727.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Self-reception</H1>
    <B>gribov at ixxat.de</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20Self-reception&In-Reply-To=%3C166589D0B9DD2547A1319599B9BADA1F5A9F6E%40vsv-exchange.ixxat.intranet.priv%3E"
       TITLE="Self-reception">gribov at ixxat.de
       </A><BR>
    <I>Tue Oct 12 10:25:32 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="004721.html">Self-reception
</A></li>
        <LI>Next message: <A HREF="004727.html">Self-reception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4725">[ date ]</a>
              <a href="thread.html#4725">[ thread ]</a>
              <a href="subject.html#4725">[ subject ]</a>
              <a href="author.html#4725">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Oliver,

&gt;&gt;&gt;<i> My understanding of &quot;self-reception&quot; per-socket option is that the
</I>&gt;&gt;&gt;<i> messages send over the specific socket are not only received by
</I>&gt;&gt;&gt;<i> other sockets on the same HW, but also by the original socket (so
</I>&gt;&gt;&gt;<i> &quot;echo&quot; may be even better name for that). And the reason why I
</I>&gt;&gt;&gt;<i> want to receive (some of) my own Tx messages is because I want
</I>&gt;&gt;&gt;<i> to know *exactly* when whose messages where physically send over
</I>&gt;&gt;&gt;<i> CAN bus. And that I am getting by reading the timestamp of my
</I>&gt;&gt;&gt;<i> self-received message. And the per-message self-receive flag helps
</I>&gt;&gt;&gt;<i> me to distinguish between Rx messages (coming from other CAN nodes
</I>&gt;&gt;&gt;<i> or other sockets on the same CAN node) and my own Tx messages.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Thanks for the update. Seems like my understanding was right.
</I>&gt;<i>
</I>&gt;<i> Ah, ok. So it's not to know, whether the CAN frame came from outside
</I>&gt;<i> BUT to know, when my originated CAN frame from this socket touched 
</I>&gt;<i> the bus.
</I>

Well yes, for me at the moment is important to know, when my own Tx
message has leaved the CAN controller. 

I can imagine however, that for some special applications (routing, 
bridging etc) it *may* be interesting to know, if message was from 
&quot;outside&quot; or just from another socket. If I understand the mechanism
right, using SO_MARK may allow to distinguish messages received from
other CAN node (massage has no SO_MARK), message from other sockets 
opened on the same HW as we are (message has corresponding SO_MARK 
from that other socket) and our own self-received messages (message
has our own SO_MARK).
Just an another idea: each process set SO_MARK option to its PID and 
candump shows the SO_MARK values in the output. Then you can 
immediately see in the log, if the message was originated from outside 
or from local process, knowing even from which specific process.


Regards,
Vladislav
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004721.html">Self-reception
</A></li>
	<LI>Next message: <A HREF="004727.html">Self-reception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4725">[ date ]</a>
              <a href="thread.html#4725">[ thread ]</a>
              <a href="subject.html#4725">[ subject ]</a>
              <a href="author.html#4725">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
