<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> More on bit time setting and calculation...
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20More%20on%20bit%20time%20setting%20and%20calculation...&In-Reply-To=%3C484C31C1.3020903%40grandegger.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001315.html">
   <LINK REL="Next"  HREF="001321.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>More on bit time setting and calculation...</H1>
    <B>Wolfgang Grandegger</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20More%20on%20bit%20time%20setting%20and%20calculation...&In-Reply-To=%3C484C31C1.3020903%40grandegger.com%3E"
       TITLE="More on bit time setting and calculation...">wg at grandegger.com
       </A><BR>
    <I>Sun Jun  8 21:23:45 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001315.html">More on bit time setting and calculation...
</A></li>
        <LI>Next message: <A HREF="001321.html">More on bit time setting and calculation...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1318">[ date ]</a>
              <a href="thread.html#1318">[ thread ]</a>
              <a href="subject.html#1318">[ subject ]</a>
              <a href="author.html#1318">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Robert Schwebel wrote:
&gt;<i> On Sun, Jun 08, 2008 at 08:55:27PM +0200, Wolfgang Grandegger wrote:
</I>&gt;&gt;<i> Do we have already reached consensus on dropping hardware independent
</I>&gt;&gt;<i> setting in favor of setting btregs directly?
</I>&gt;<i> 
</I>&gt;<i> No, what was the argument here?
</I>&gt;<i> 
</I>&gt;<i> If I remember correctly, we have agreed on using the model from the
</I>&gt;<i> standard, which uses
</I>&gt;<i> 
</I>&gt;<i> bitrate
</I>&gt;<i> tq
</I>&gt;<i> err
</I>&gt;<i> prop_seg
</I>&gt;<i> phase_seg1
</I>&gt;<i> phase_seg2
</I>&gt;<i> sjw
</I>&gt;<i> sam
</I>&gt;<i> 
</I>&gt;<i> and was once implemented by a patch from Juergen.
</I>
Please catch up with the threads &quot;RFC: Hardware independent bit timing&quot;
and &quot;Re: sysfs setting of btr values&quot;. In short, hardware independent
bit timing setting will not make all users happy and the existing
functions to calculate btr will not reproduce the CIA recommended
values. We have not dropped the idea in general, but I prefer to
implement it in user space (library or utility).

&gt;&gt;<i> I still prefer the setup of a btregs table, which can be replaced by
</I>&gt;&gt;<i> writing a new table to the SYSFS file can_btregs.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   $ cat /sys/.../can_btregs
</I>&gt;&gt;<i>   1000000 0x0014
</I>&gt;&gt;<i>    800000 0x0016
</I>&gt;&gt;<i>    500000 0x001C
</I>&gt;&gt;<i>    250000 0x011C
</I>&gt;&gt;<i>    125000 0x031C
</I>&gt;&gt;<i>    100000 0x041C
</I>&gt;&gt;<i>     50000 0x091C
</I>&gt;&gt;<i>     20000 0x181C
</I>&gt;&gt;<i>     10000 0x311C
</I>&gt;<i> 
</I>&gt;<i> One value per sysfs file, there is no way around this. So either make a
</I>&gt;<i> directory with the single values, or use configfs.
</I>
OK, then the mention minimal solution would be an option. Just
can_bittime and can_btreg, it's very simple and needs little code to be
implemented.

Wolfgang.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001315.html">More on bit time setting and calculation...
</A></li>
	<LI>Next message: <A HREF="001321.html">More on bit time setting and calculation...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1318">[ date ]</a>
              <a href="thread.html#1318">[ thread ]</a>
              <a href="subject.html#1318">[ subject ]</a>
              <a href="author.html#1318">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
