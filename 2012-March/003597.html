<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> No subject
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2012-March/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.31.1331738158.11849.socketcan-core%40lists.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003567.html">
   <LINK REL="Next"  HREF="003794.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>No subject</H1>
    <B></B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.31.1331738158.11849.socketcan-core%40lists.berlios.de%3E"
       TITLE="No subject">
       </A><BR>
    <I>Wed Mar 14 16:15:16 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="003567.html">No subject
</A></li>
        <LI>Next message: <A HREF="003794.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3597">[ date ]</a>
              <a href="thread.html#3597">[ thread ]</a>
              <a href="subject.html#3597">[ subject ]</a>
              <a href="author.html#3597">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>----------------------
(1) According to the CAN Specification, no transmitter may send a frame with DLC &gt; 8.
The case of DLC &gt; 8 is not covered by any of the error types defined in chapter 7.1
&quot;Error Detection&quot;. It is neither a Bit Error, nor a Stuff Error, nor a CRC Error, nor
an Acknowledge Error. It could be regarded as a Form Error, but the DLC belongs
to the stuffed Control Field and the Form Error is only defined for the fixed-form
bit fields (see chapter 6 &quot;Bit Stream Coding&quot;). So no condition for Error Signalling
(see chapter 7.2) is fulfilled, the reaction of a receiver to a DLC &gt; 8 is not
defined. The Reference CAN Model defines as de-facto standard the assumption
[if received DLC &gt; 8 then DLC := 8], expecting to receive 8 data bytes even when the
received Data Length Code exceeds its upper limit of 8.&quot;
----------------------

And later in the ISO 11898 spec:

----------------------
8.4.2.3 DLC field:
The number of bytes in the data field  shall be indicated by the DLC, see table 4.
This DLC consists of four (4) bits. The data field  may be of length zero. The
admissible number of data bytes for a data frame shall range from zero (0) to eight
(8). Data length codes in the range of zero (0) to seven (7) shall indicate data
fields of length of zero (0) to seven (7) bytes. All other data length codes shall
indicate that the data field is eight (8) bytes long.&quot;
----------------------

&gt;<i> Especially the SJA1000 driver was happy to get this clean-up :-)
</I>&gt;<i> 
</I>&gt;<i> See at:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://svn.berlios.de/wsvn/socketcan/?op=comp&amp;compare[">http://svn.berlios.de/wsvn/socketcan/?op=comp&amp;compare[</A>]=%<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">2F at 1092</A>&amp;compare[]=%<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">2F at 1093</A>
</I>&gt;<i> 
</I>&gt;<i> I compile checked all drivers but mscan and at91_can which is not possible on x86.
</I>&gt;<i> 
</I>&gt;<i> Please check the changes. If it's ok, i'll send a patch to netdev when the
</I>&gt;<i> current merge window is nearly closed.
</I>&gt;<i> 
</I>&gt;&gt;<i> Please also check for useless &quot;dlc &gt; 8&quot; checks in the
</I>&gt;&gt;<i> start_xmit function.
</I>&gt;<i> 
</I>&gt;<i> I thought about that and i'm not really sure about it:
</I>&gt;<i> What if anyone uses PF_PACKET with CAN netdevices, which is a possible use-case?
</I>
OK.

Thanks, Wolfgang.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003567.html">No subject
</A></li>
	<LI>Next message: <A HREF="003794.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3597">[ date ]</a>
              <a href="thread.html#3597">[ thread ]</a>
              <a href="subject.html#3597">[ subject ]</a>
              <a href="author.html#3597">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
