<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [PATCH] Peak PCI CAN card driver
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%5D%20Peak%20PCI%20CAN%20card%20driver&In-Reply-To=%3C4AF30EFB.7050206%40grandegger.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003392.html">
   <LINK REL="Next"  HREF="003402.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[PATCH] Peak PCI CAN card driver</H1>
    <B>Wolfgang Grandegger</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%5D%20Peak%20PCI%20CAN%20card%20driver&In-Reply-To=%3C4AF30EFB.7050206%40grandegger.com%3E"
       TITLE="[PATCH] Peak PCI CAN card driver">wg at grandegger.com
       </A><BR>
    <I>Thu Nov  5 18:44:27 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003392.html">[PATCH] Peak PCI CAN card driver
</A></li>
        <LI>Next message: <A HREF="003402.html">[PATCH] Peak PCI CAN card driver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3394">[ date ]</a>
              <a href="thread.html#3394">[ thread ]</a>
              <a href="subject.html#3394">[ subject ]</a>
              <a href="author.html#3394">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Oliver Hartkopp wrote:
&gt;<i> Peter Horton wrote:
</I>&gt;&gt;<i> Oliver Hartkopp wrote:
</I>&gt;&gt;&gt;<i> Peter Horton wrote:
</I>&gt;&gt;&gt;&gt;<i> The patch below adds support for the Peak PCI CAN interface cards. The
</I>&gt;&gt;&gt;&gt;<i> cards are SJA1000 based so only the PCI glue is needed.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Tested with a 2 channel card but should work with 1, 2, 3 or 4 channel
</I>&gt;&gt;&gt;&gt;<i> cards.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Signed-off-by: Peter Horton &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">phorton at bitbox.co.uk</A>&gt;
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> + *
</I>&gt;&gt;&gt;&gt;<i> + * PCI glue for Peak PCI SJA1000 CAN cards
</I>&gt;&gt;&gt;&gt;<i> + *
</I>&gt;&gt;&gt;&gt;<i> + * mostly lifted from ems_pci.c
</I>&gt;&gt;&gt;&gt;<i> + */
</I>&gt;&gt;&gt;&gt;<i> +
</I>&gt;&gt;&gt;<i> Hi Peter,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> we already *have* a PEAK PCI SJA1000 driver in the SocketCAN SVN - for
</I>&gt;&gt;&gt;<i> 666
</I>&gt;&gt;&gt;<i> days now :-)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> <A HREF="http://svn.berlios.de/wsvn/socketcan/trunk/kernel/2.6/drivers/net/can/sja1000/peak_pci.c?op=log&amp;rev=0&amp;sc=0&amp;isdir=0">http://svn.berlios.de/wsvn/socketcan/trunk/kernel/2.6/drivers/net/can/sja1000/peak_pci.c?op=log&amp;rev=0&amp;sc=0&amp;isdir=0</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Did you notice that?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> Oops, no.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Not all drivers in the SocketCAN SVN have already been made ready for
</I>&gt;&gt;&gt;<i> mainline.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Or is you driver 'better' in any technical point?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> No I don't think so.
</I>
Peter's driver supports up to 4 channels. Our current implementation in
the SVN trunk just supports 2 channels and it needs to be updated
similar to the EMS PCI (or Kvasar) driver. Therefore, I appreciate
Peter's effort.

&gt;<i> Puh!
</I>&gt;<i> 
</I>&gt;&gt;<i> Is there any reason you've kept the driver out of mainline?
</I>&gt;<i> 
</I>&gt;<i> Not really.
</I>
See above. Furthermore, making a driver ready for mainline is a real
effort, and time is not an unlimited resource, unfortunately. But
volunteers are always welcome, of course ;-).

&gt;<i> The CAN subsystem touched the Kernel with 2.6.25 but it has last a long time
</I>&gt;<i> to create an appropriate CAN driver infrastructure, which became part of 2.6.31.
</I>&gt;<i> 
</I>&gt;<i> Now the drivers in the SVN are made ready for mainline step-by-step. Regarding
</I>&gt;<i> the PEAK PCI driver contributed by Wolfgang Grandegger i don't know why
</I>&gt;<i> exactly *this* driver has not been mainlined. I've used it in many cases.
</I>
See above. Furthermore, we need hardware for that purpose, e.g. EMS
W&#252;nsche and Kvaser helped to implement and test the driver on their
hardware.

&gt;<i> Additionally the SVN is used to provide the mainline drivers in a 'backward'
</I>&gt;<i> compatible shape to be used by 'older' kernels like 2.6.23 ...
</I>
Yes, we need that. Peter, are you willing to work on your SJA1000 patch
to get it mainline and update our PEAK PCI SVN driver accordingly? If
yes, I'm going to review it.

Wolfgang.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003392.html">[PATCH] Peak PCI CAN card driver
</A></li>
	<LI>Next message: <A HREF="003402.html">[PATCH] Peak PCI CAN card driver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3394">[ date ]</a>
              <a href="thread.html#3394">[ thread ]</a>
              <a href="subject.html#3394">[ subject ]</a>
              <a href="author.html#3394">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
