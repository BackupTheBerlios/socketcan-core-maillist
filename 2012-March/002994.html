<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> No subject
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2012-March/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.26.1331738148.11849.socketcan-core%40lists.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002974.html">
   <LINK REL="Next"  HREF="003387.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>No subject</H1>
    <B></B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.26.1331738148.11849.socketcan-core%40lists.berlios.de%3E"
       TITLE="No subject">
       </A><BR>
    <I>Wed Mar 14 16:15:16 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="002974.html">No subject
</A></li>
        <LI>Next message: <A HREF="003387.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2994">[ date ]</a>
              <a href="thread.html#2994">[ thread ]</a>
              <a href="subject.html#2994">[ subject ]</a>
              <a href="author.html#2994">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>the CAN controller goes to bus off because something is seriously
wrong with itself, wires or other nodes. So it is very often not
really good idea to make automatic recovery which is with other=20
words simply ignoring that serious problems (well, the reception=20
of 128*11 recessive bits is a good sign that the problem has gone,=20
but still..). The application may want the CAN controller to=20
signal the bus off and stay off the bus until the application=20
decides to recover the communication.

So if the CAN controller only supports auto recovery and cannot=20
keep hands off from the bus, the option for the manual recovery=20
in the socket CAN driver is to reset CAN controller in the bus off=20
interrupt (I remember this was proposes by Sebastian, and I=20
agree on this).

Regards,
Vladislav

-----Original Message-----
From: Wolfgang Grandegger [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">wg at grandegger.com</A>]=20
Sent: Thursday, September 03, 2009 2:50 PM
To: Marc Kleine-Budde
Cc: <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">socketcan-core at lists.berlios.de</A>; Heinz-J=FCrgen Oertel; Uwe Koppe; =
Gribov, Vladislav
Subject: Re: at91_can bus off handling

Marc Kleine-Budde wrote:
&gt;<i> Marc Kleine-Budde wrote:
</I>&gt;&gt;&gt;<i> IIRC, the reaction on bus-off is configurable and auto-recovery is
</I>&gt;&gt;&gt;<i> disabled. Unlike the MPC5200, the MPC512x now also has a similar
</I>&gt;&gt;&gt;<i> configuration bit. There was some discussion recently on how to =
</I>handle
&gt;&gt;&gt;<i> chips with automatic bus-off recovery.
</I>&gt;&gt;<i> Which thread do you mean? The at91 data sheet says it comes back from
</I>&gt;&gt;<i> bus off after that 128-bit thing (i.e. idle bus). But I asked the
</I>&gt;&gt;<i> support, though.
</I>&gt;<i>=20
</I>&gt;<i> the support says:
</I>&gt;<i>=20
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">at91 at atmel.com</A> wrote:
</I>&gt;&gt;&gt;<i> Can this autorecovery-128-bits be disabled on the at91?
</I>&gt;&gt;<i> For sure not as we would be out of spec.
</I>
I doubt that but I do not really know the spec. I put a few CAN expert
on CC who might be able to tell us if bus-off recovery should be done
automatically (immediately) by the hardware.

Wolfgang.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002974.html">No subject
</A></li>
	<LI>Next message: <A HREF="003387.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2994">[ date ]</a>
              <a href="thread.html#2994">[ thread ]</a>
              <a href="subject.html#2994">[ subject ]</a>
              <a href="author.html#2994">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
