<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> CAN_RAW_RECV_OWN_MSGS - Re: [0/3] softing CANcard
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20CAN_RAW_RECV_OWN_MSGS%20-%20Re%3A%20%5B0/3%5D%20softing%20CANcard&In-Reply-To=%3C4860ACC1.4000304%40eia.be%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001596.html">
   <LINK REL="Next"  HREF="001601.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>CAN_RAW_RECV_OWN_MSGS - Re: [0/3] softing CANcard</H1>
    <B>Kurt Van Dijck</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20CAN_RAW_RECV_OWN_MSGS%20-%20Re%3A%20%5B0/3%5D%20softing%20CANcard&In-Reply-To=%3C4860ACC1.4000304%40eia.be%3E"
       TITLE="CAN_RAW_RECV_OWN_MSGS - Re: [0/3] softing CANcard">kurt.van.dijck at eia.be
       </A><BR>
    <I>Tue Jun 24 10:13:53 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001596.html">CAN_RAW_RECV_OWN_MSGS - Re: [0/3] softing CANcard
</A></li>
        <LI>Next message: <A HREF="001601.html">softing CANcard firmware
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1599">[ date ]</a>
              <a href="thread.html#1599">[ thread ]</a>
              <a href="subject.html#1599">[ subject ]</a>
              <a href="author.html#1599">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Oliver Hartkopp wrote:
&gt;<i> Kurt Van Dijck wrote:
</I>&gt;&gt;<i> This patch adds the softing Gmbh CANcard to the socketCAN list.
</I>&gt;&gt;<i> Things you should know on this driver:
</I>&gt;&gt;<i> * Checkpatch.pl has a few warnings on complex macro's
</I>&gt;&gt;<i> * I tested with kernel 2.6.23.8
</I>&gt;&gt;<i> * It won't work on a big endian machine (yet)
</I>&gt;&gt;<i> * The drivers looses knowledge of which socket initiated which packet,
</I>&gt;&gt;<i>     so CAN_RAW_RECV_OWN_MSGS won't work
</I>&gt;&gt;<i>   
</I>&gt;<i> 
</I>&gt;<i> We should consider to disable the interface flag IFF_ECHO in the softing 
</I>&gt;<i> driver as long as this functionality can not be implemented correctly 
</I>&gt;<i> right now.
</I>&gt;<i> What do you think?
</I>I'm not that sure, but the way I understood is that the IFF_ECHO flag is used to
indicate that the interface does not hold transmitted frames.
The problem that sits in the softing driver is that the interface looses knowledge of
what socket a frame originated from.
This means, I have a program that starts with transmitting a frame each 50ms.
To prevent buffers overflowing, I take card to only queue 1 single frame, therefore,
I _need_ the transmitted frames. My program works fine with it. Even, when
the CAN_RAW_RECV_OWN_MSGS is not set.

disabling the IFF_ECHO in the driver would mean my program looses the touch
with the wire, ie, when alone on the bus, no frame gets out, and all buffers start
overflowing. Bad plan. The cure is worse than the pain.
&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Oliver
</I>&gt;<i> 
</I>&gt;<i> ps. The driver works now on my 2.6.26-rc7 also. Very nice!
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001596.html">CAN_RAW_RECV_OWN_MSGS - Re: [0/3] softing CANcard
</A></li>
	<LI>Next message: <A HREF="001601.html">softing CANcard firmware
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1599">[ date ]</a>
              <a href="thread.html#1599">[ thread ]</a>
              <a href="subject.html#1599">[ subject ]</a>
              <a href="author.html#1599">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
