<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Comments on bit-time calculation
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2008-October/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20Comments%20on%20bit-time%20calculation&In-Reply-To=%3C48EB1604.80208%40grandegger.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001952.html">
   <LINK REL="Next"  HREF="001934.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Comments on bit-time calculation</H1>
    <B>Wolfgang Grandegger</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20Comments%20on%20bit-time%20calculation&In-Reply-To=%3C48EB1604.80208%40grandegger.com%3E"
       TITLE="Comments on bit-time calculation">wg at grandegger.com
       </A><BR>
    <I>Tue Oct  7 09:55:48 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001952.html">at91can problem with new bittiming algo
</A></li>
        <LI>Next message: <A HREF="001934.html">Comments on bit-time calculation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1920">[ date ]</a>
              <a href="thread.html#1920">[ thread ]</a>
              <a href="subject.html#1920">[ subject ]</a>
              <a href="author.html#1920">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I just fixed a bug in the bit-time calculation and partitioned tseg1:

  <A HREF="http://svn.berlios.de/wsvn/socketcan/?rev=832&amp;sc=1">http://svn.berlios.de/wsvn/socketcan/?rev=832&amp;sc=1</A>

With this patch, the existing do_set_bittiming() should work. I'm going
to provide a proper patch using min/max values for prog_seg, phase_seg1
and phase_seg2 next week.

I have also attached my little user space programm allowing to play with
various setting.

Some general remark. The algorithm first try to match exactly the
bit-rate. In case of exact matches, it tries to get as close as possible
to the wished sample point. It likely fails for exotic source clock
frequencies like 99532800Hz, but it should give good results for
100000000Hz (100MHz). If the frequency in MHz is a multiple of 8, then
you usually get best results for the standard bit-rates. Rounding up
would make sense.

Wolfgang.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: can-calc-bit-timing-c
Type: application/octet-stream
Size: 8647 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/socketcan-core/attachments/20081007/35e97164/attachment.obj">https://lists.berlios.de/pipermail/socketcan-core/attachments/20081007/35e97164/attachment.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001952.html">at91can problem with new bittiming algo
</A></li>
	<LI>Next message: <A HREF="001934.html">Comments on bit-time calculation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1920">[ date ]</a>
              <a href="thread.html#1920">[ thread ]</a>
              <a href="subject.html#1920">[ subject ]</a>
              <a href="author.html#1920">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
