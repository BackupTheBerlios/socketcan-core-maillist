<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [PATCH net-next v2] candev: allow SJW user setting for bittiming	calculation
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2011-September/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%20net-next%20v2%5D%20candev%3A%20allow%20SJW%20user%20setting%20for%20bittiming%0A%09calculation&In-Reply-To=%3C4E8208B5.4050907%40hartkopp.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006118.html">
   <LINK REL="Next"  HREF="006122.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[PATCH net-next v2] candev: allow SJW user setting for bittiming	calculation</H1>
    <B>Oliver Hartkopp</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%20net-next%20v2%5D%20candev%3A%20allow%20SJW%20user%20setting%20for%20bittiming%0A%09calculation&In-Reply-To=%3C4E8208B5.4050907%40hartkopp.net%3E"
       TITLE="[PATCH net-next v2] candev: allow SJW user setting for bittiming	calculation">socketcan at hartkopp.net
       </A><BR>
    <I>Tue Sep 27 19:32:37 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="006118.html">[PATCH net-next v2] candev: allow SJW user setting for bittiming	calculation
</A></li>
        <LI>Next message: <A HREF="006122.html">[PATCH net-next v2] candev: allow SJW user setting for bittiming	calculation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6121">[ date ]</a>
              <a href="thread.html#6121">[ thread ]</a>
              <a href="subject.html#6121">[ subject ]</a>
              <a href="author.html#6121">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/24/11 09:22, Wolfgang Grandegger wrote:

&gt;<i> On 09/23/2011 11:32 AM, Pavel Pisa wrote:
</I>
&gt;&gt;<i> On base of above analysis, I think that blindly set SJW
</I>&gt;&gt;<i> on maximum is not good idea. It should be at least limited
</I>&gt;&gt;<i> to 5% of bit time. 
</I>

(..)


&gt;&gt;<i> SJW is more problematic, but may it be use of 2 or 5%
</I>&gt;&gt;<i> of bittime by default with assurance that zero is
</I>&gt;&gt;<i> replaced by one, would serve to most people pleasure.
</I>

(..)

&gt;&gt;<i> But there is still unknown parameter
</I>&gt;&gt;<i> capacity/length of connected wires so there is still
</I>&gt;&gt;<i> something left to user consideration.
</I>&gt;<i> 
</I>&gt;<i> Thanks for your detailed explanation. It clearly shows that adjusting
</I>&gt;<i> SJW is non-trivial and nothing a normal CAN user should deal with. When
</I>&gt;<i> adjusting SJW, do you also need to tweek other bit-timing parameters,
</I>&gt;<i> e.g. tq? I mean, would &quot;ip link set can0 type can bitrate x
</I>&gt;<i> sampling-point y sjw z&quot; work for your setup or do you need to use the
</I>&gt;<i> expert mode setting via &quot;ip link set can0 type can tq ...&quot; anyway?
</I>

Hello Wolfgang,

i double checked a specification where i got my requirement to influence the
SJW value from. It says (non literally):

    &quot;Put the SJW to the highest possible value only reduced by tseg2.&quot;

The fact that this requirement might no fit to any CAN setup or may not be  in
best academical shape is not my problem. My requirement is to provide an easy
way to move the SJW away from it's default value, which is currently
hard-coded to 1 in the can-dev framework when using it's bittiming calculation
function.

As almost everything is already done (only the provided SJW is not evaluated
in dev.c) this patch is IMO an valid option to support it. If Joe user can
tune the sampling point, why should he not be able to influence the SJW if he
thinks, he knows what he's doing?

Especially as the good working bittiming calculation is not touched in any way
and the default SJW remains 1 (even if '0' is provided as user input).

Regards,
Oliver

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006118.html">[PATCH net-next v2] candev: allow SJW user setting for bittiming	calculation
</A></li>
	<LI>Next message: <A HREF="006122.html">[PATCH net-next v2] candev: allow SJW user setting for bittiming	calculation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6121">[ date ]</a>
              <a href="thread.html#6121">[ thread ]</a>
              <a href="subject.html#6121">[ subject ]</a>
              <a href="author.html#6121">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
