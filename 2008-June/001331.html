<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> More on bit time setting and calculation...
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20More%20on%20bit%20time%20setting%20and%20calculation...&In-Reply-To=%3C484CE6D6.4090601%40ems-wuensche.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001355.html">
   <LINK REL="Next"  HREF="001333.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>More on bit time setting and calculation...</H1>
    <B>Sebastian Haas</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20More%20on%20bit%20time%20setting%20and%20calculation...&In-Reply-To=%3C484CE6D6.4090601%40ems-wuensche.com%3E"
       TITLE="More on bit time setting and calculation...">haas at ems-wuensche.com
       </A><BR>
    <I>Mon Jun  9 10:16:22 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001355.html">More on bit time setting and calculation...
</A></li>
        <LI>Next message: <A HREF="001333.html">More on bit time setting and calculation...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1331">[ date ]</a>
              <a href="thread.html#1331">[ thread ]</a>
              <a href="subject.html#1331">[ subject ]</a>
              <a href="author.html#1331">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

We should take care of not doing too much. Specifying the bitrate
according the standard model meets the needs of 99.99% of use cases.
Providing access to a hardware dependent settings doesn't follow the
concept of the kernel, to abstract the access to the hardware.

Setting controller specific things like SJA1000' synchronization jump
width, is practically not done even not by the so-called CAN experts.
Almost all customers of us uses our standard bitrates for CiA recommended
bitrates.

If someone, want's to change really controller specific things, he may
change this setting via a module parameter?!

So creating a big interface which covers the last 0.001% isn't worthwhile
in my opinion. Keep it simple with a bitrate table and the standard model.

Robert Schwebel wrote:
&gt;<i> On Mon, Jun 09, 2008 at 09:33:26AM +0200, Oliver Hartkopp wrote:
</I>&gt;&gt;<i> For me it's just the problem not to overload the Kernel with really
</I>&gt;&gt;<i> specific stuff that can be better realized out of kernel context.
</I>&gt;<i> 
</I>&gt;<i> Well, if *all* CAN drivers need this and it makes a convenient userspace
</I>&gt;<i> interface without the need to create new maintenance dependencies, it
</I>&gt;<i> may be worth the effort.
</I>&gt;<i> 
</I>&gt;&gt;<i> The can_btregs is (and remains) for experts.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> And can_bitrate should provide a simple interface, that
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - calculates a bitrate with a simple(!) algorithm
</I>&gt;&gt;<i> - uses a build-in table (maybe for different clocks) if available
</I>&gt;<i> 
</I>&gt;<i> That was exactly the reasoning behind our code. If nobody has set
</I>&gt;<i> special values for a bitrate, the heuristics determines a parameter set.
</I>&gt;<i> At the time we implemented the code, it was done with ioctl()s, but it
</I>&gt;<i> surely can easily be ported to a sysfs interface.
</I>&gt;<i> 
</I>&gt;<i> I suppose the main question here is &quot;btregs vs. standard model&quot;.
</I>&gt;<i> 
</I>&gt;<i> Robert
</I>
- --
Mit freundlichen Gruessen/Best Regards,

Sebastian Haas
Software Entwicklung/Software Development

Phone: +49-9451-9432-22
Fax  : +49-9451-9432-12
Email: <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-core">haas at ems-wuensche.com</A>
Web  : www.ems-wuensche.com
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - <A HREF="http://enigmail.mozdev.org">http://enigmail.mozdev.org</A>

iD8DBQFITObUpqRB8PJG7XwRAgeQAJ94upkQ0LngaoVjhfEc3m5soUWT1ACfVQJ1
0cgUcbzacwrIiU8GGbNSEBo=
=r8dQ
-----END PGP SIGNATURE-----
-- 
EMS Dr. Thomas Wuensche e.K.
Sonnenhang 3
85304 Ilmmuenster
HRA Neuburg a.d. Donau, HR-Nr. 70.106
Phone: +49-8441-490260
Fax  : +49-8441-81860
<A HREF="http://www.ems-wuensche.com">http://www.ems-wuensche.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001355.html">More on bit time setting and calculation...
</A></li>
	<LI>Next message: <A HREF="001333.html">More on bit time setting and calculation...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1331">[ date ]</a>
              <a href="thread.html#1331">[ thread ]</a>
              <a href="subject.html#1331">[ subject ]</a>
              <a href="author.html#1331">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
