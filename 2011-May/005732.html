<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [PATCH v4 1/1] can: add pruss CAN driver.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2011-May/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%20v4%201/1%5D%20can%3A%20add%20pruss%20CAN%20driver.&In-Reply-To=%3C201105112331.47954.arnd%40arndb.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005727.html">
   <LINK REL="Next"  HREF="005733.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[PATCH v4 1/1] can: add pruss CAN driver.</H1>
    <B>Arnd Bergmann</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%20v4%201/1%5D%20can%3A%20add%20pruss%20CAN%20driver.&In-Reply-To=%3C201105112331.47954.arnd%40arndb.de%3E"
       TITLE="[PATCH v4 1/1] can: add pruss CAN driver.">arnd at arndb.de
       </A><BR>
    <I>Wed May 11 23:31:47 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005727.html">[PATCH v4 1/1] can: add pruss CAN driver.
</A></li>
        <LI>Next message: <A HREF="005733.html">[PATCH v4 1/1] can: add pruss CAN driver.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5732">[ date ]</a>
              <a href="thread.html#5732">[ thread ]</a>
              <a href="subject.html#5732">[ subject ]</a>
              <a href="author.html#5732">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tuesday 10 May 2011, Subhasish Ghosh wrote:
&gt;<i> 
</I>&gt;<i> &gt;&gt; Yes, In case if we allow the ALL implementation, it hogs the CPU.
</I>&gt;<i> &gt;&gt; In that case we do not need the PRU. The whole purpose of the PRU
</I>&gt;<i> &gt;&gt; is to offload the processor for any such implementations. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; So the kernel presumably needs to switch between using the PRU and native
</I>&gt;<i> &gt; according to the number of ids being requested at the time ?
</I>&gt;<i> 
</I>&gt;<i> All the IDs are programmed into the PRU data RAM.
</I>&gt;<i> The Kernel receives interrupts based upon these IDs.
</I>&gt;<i> I could not clearly follow &quot;PRU and native&quot;, could you please elaborate.
</I>
We would really like all CAN drivers to behave the same way. All other
drivers are able to work without filters, so pruss_can should allow that
too, even if it becomes a CPU hog at that time.

It seems to me that the pruss can implementation has one thing backwards:
it assumes a specific usage model for CAN that it is trying to do offload
for. However, that usage model is currently not even supported by Socket
CAN. If I understand Wolfgang correctly, it is in fact considered an
unwanted limitation of the pruss can driver, instead of a useful feature.

If that interpretation is right, I would seriously recommend rethinking
the design of the CAN firmware for pruss, so you can start doing something
useful with the offload engine that fits into the Socket CAN API, or that
would be a useful extension to Socket CAN that is also implementable in
the kernel for all other drivers in a meaningful way.

	Arnd

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005727.html">[PATCH v4 1/1] can: add pruss CAN driver.
</A></li>
	<LI>Next message: <A HREF="005733.html">[PATCH v4 1/1] can: add pruss CAN driver.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5732">[ date ]</a>
              <a href="thread.html#5732">[ thread ]</a>
              <a href="subject.html#5732">[ subject ]</a>
              <a href="author.html#5732">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
