<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [RFC v2 0/8] can: Device driver interface for kernel inclusion
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BRFC%20v2%200/8%5D%20can%3A%20Device%20driver%20interface%20for%20kernel%20inclusion&In-Reply-To=%3C499EBB6D.3030107%40volkswagen.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002348.html">
   <LINK REL="Next"  HREF="002350.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[RFC v2 0/8] can: Device driver interface for kernel inclusion</H1>
    <B>Oliver Hartkopp</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BRFC%20v2%200/8%5D%20can%3A%20Device%20driver%20interface%20for%20kernel%20inclusion&In-Reply-To=%3C499EBB6D.3030107%40volkswagen.de%3E"
       TITLE="[RFC v2 0/8] can: Device driver interface for kernel inclusion">oliver.hartkopp at volkswagen.de
       </A><BR>
    <I>Fri Feb 20 15:17:17 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002348.html">[RFC v2 0/8] can: Device driver interface for kernel inclusion
</A></li>
        <LI>Next message: <A HREF="002350.html">[RFC v2 0/8] can: Device driver interface for kernel inclusion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2349">[ date ]</a>
              <a href="thread.html#2349">[ thread ]</a>
              <a href="subject.html#2349">[ subject ]</a>
              <a href="author.html#2349">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Wolfgang Grandegger wrote:
&gt;<i> Oliver Hartkopp wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> I just invoked 'man ip' on my box to get an impression what is currently 
</I>&gt;&gt;<i> supported and how our things could probably be 'modelled' with 'ip'.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  From a first sight 'ip' is designed for network interfaces that support 
</I>&gt;&gt;<i> the internet protocol (what surprise :) - especially for all this 
</I>&gt;&gt;<i> routing, tunneling, neighbour and xfrm stuff that's far away from CAN 
</I>&gt;&gt;<i> use-cases.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It was perfectly fine to use the netlink interface to create and manage 
</I>&gt;&gt;<i> CAN software devices like the VCAN driver instances, we have been 
</I>&gt;&gt;<i> pointed to by Patrick McHardy at vcan mainlining. But my gut feeling is, 
</I>&gt;&gt;<i> that we would need to create a special (separate) userspace tool like 
</I>&gt;&gt;<i> 'ip' that is mandatory to enable CAN interfaces, which needs to be 
</I>&gt;&gt;<i> maintained and probably must be upgraded for newer Kernel versions.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Do we want to have that?
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> That's not the question. We have to ask our self it's the better
</I>&gt;<i> approach and if not we need to provide valuable arguments against.
</I>&gt;<i>
</I>&gt;<i>   
</I>
Right.

&gt;&gt;<i> I'll also take a look on other sysfs users inside the kernel to get an 
</I>&gt;&gt;<i> impression of the philosophy there.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> OK, my quick impression is that it can be done with netlink but it
</I>&gt;<i> requires some real effort :-(.
</I>&gt;<i>   
</I>
Yep. I took a closer look into some netlink documentation.

E.g. <A HREF="http://www.linuxjournal.com/article/7356">http://www.linuxjournal.com/article/7356</A>

The interesting thing is, that also the driver is able send (multicast) 
messages to the userspace that could also be used for bus-off 
indications or anything like this ...

But using netlink would bring the 'CAN netdev interface' itself nearly 
back to its starting point and a re-use of about 30% of the current code.

:<i>-(
</I>
Due to the fact that the interface is properly defined there would be no 
significant changes for the CAN drivers themselves, but we would need 
some kind of 'canconfig' tool as i assume 'ip' to be overloaded with all 
the CAN stuff.

I like the sysfs very much but netlink looks like the better approach.

Sigh! I think i need a beer.

Oliver

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002348.html">[RFC v2 0/8] can: Device driver interface for kernel inclusion
</A></li>
	<LI>Next message: <A HREF="002350.html">[RFC v2 0/8] can: Device driver interface for kernel inclusion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2349">[ date ]</a>
              <a href="thread.html#2349">[ thread ]</a>
              <a href="subject.html#2349">[ subject ]</a>
              <a href="author.html#2349">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
