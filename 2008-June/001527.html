<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [PATCH] Support EMS CPC-CARD (PCMCIA)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%5D%20Support%20EMS%20CPC-CARD%20%28PCMCIA%29&In-Reply-To=%3C4854086A.3010509%40grandegger.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001526.html">
   <LINK REL="Next"  HREF="001502.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[PATCH] Support EMS CPC-CARD (PCMCIA)</H1>
    <B>Wolfgang Grandegger</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%5D%20Support%20EMS%20CPC-CARD%20%28PCMCIA%29&In-Reply-To=%3C4854086A.3010509%40grandegger.com%3E"
       TITLE="[PATCH] Support EMS CPC-CARD (PCMCIA)">wg at grandegger.com
       </A><BR>
    <I>Sat Jun 14 20:05:30 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001526.html">[PATCH] Support EMS CPC-CARD (PCMCIA)
</A></li>
        <LI>Next message: <A HREF="001502.html">mkpatch script in branches/cannetdriver26 - was: r758 -	branches/cannetdriver26
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1527">[ date ]</a>
              <a href="thread.html#1527">[ thread ]</a>
              <a href="subject.html#1527">[ subject ]</a>
              <a href="author.html#1527">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sebastian Haas wrote:
&gt;<i> Wolfgang Grandegger schrieb:
</I>&gt;&gt;<i> Oliver Hartkopp wrote:
</I>&gt;&gt;&gt;<i> Sebastian Haas wrote:
</I>&gt;&gt;&gt;<i> But when i enable can0 first and then can1 the traffic for both channels
</I>&gt;&gt;&gt;<i> stops after one maybe more CAN frames on can1.
</I>&gt;&gt;<i> Wired, indeed. Could you enable (your old) debugging code in sja1000.c
</I>&gt;&gt;<i> by insmod'ing the module with debug=3 and send the output?
</I>&gt;<i> We had the problem before. AFAIK the problem was/is that we are leaving
</I>&gt;<i> the IRQ handler but there are still pending IRQs. It seems to be no
</I>&gt;<i> problem on PCI (level triggered?) but on PCMCIA (edge triggered?) it
</I>&gt;<i> fails. The workaround at the old PCMCIA driver (EMS' driver package) was
</I>&gt;<i> to loop within the IRQ handler until all IRQs are handled (from _both_
</I>&gt;<i> channels).
</I>
With level sensitive interrupts, you get another interrupt if the level
is still high (or low). In the post-irq callback you could check if the
first device has got an interrupt in the meantime and call it's ISR
again, if necessary. But still it can happen that the second interrupt
arrives before the IRQ line is unmasked.

&gt;<i> I'm not sure how we solve it here since the IRQs for two channels are
</I>&gt;<i> handled independently.
</I>
See above.

Wolfgang.




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001526.html">[PATCH] Support EMS CPC-CARD (PCMCIA)
</A></li>
	<LI>Next message: <A HREF="001502.html">mkpatch script in branches/cannetdriver26 - was: r758 -	branches/cannetdriver26
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1527">[ date ]</a>
              <a href="thread.html#1527">[ thread ]</a>
              <a href="subject.html#1527">[ subject ]</a>
              <a href="author.html#1527">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
