<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> RFC Loopback implementation
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2006-October/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20RFC%20Loopback%20implementation&In-Reply-To=%3C20061019082434.GF18636%40pengutronix.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000371.html">
   <LINK REL="Next"  HREF="000378.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>RFC Loopback implementation</H1>
    <B>Robert Schwebel</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20RFC%20Loopback%20implementation&In-Reply-To=%3C20061019082434.GF18636%40pengutronix.de%3E"
       TITLE="RFC Loopback implementation">r.schwebel at pengutronix.de
       </A><BR>
    <I>Thu Oct 19 10:24:34 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000371.html">RFC Loopback implementation
</A></li>
        <LI>Next message: <A HREF="000378.html">RFC Loopback implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#373">[ date ]</a>
              <a href="thread.html#373">[ thread ]</a>
              <a href="subject.html#373">[ subject ]</a>
              <a href="author.html#373">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Oct 19, 2006 at 10:17:15AM +0200, Wolfgang Grandegger wrote:
&gt;<i> Yes, if you use more than one TX hardware buffer, the sending order is 
</I>&gt;<i> defined by the hardware (and not when they get filled). I already 
</I>&gt;<i> observed that behavior on MSCAN-MPC5200, which has 3 TX buffers. This 
</I>&gt;<i> behavior is _unacceptable_ for &quot;real-time&quot;  and I will therefore switch 
</I>&gt;<i> back to using just one TX buffer or use the &quot;priority&quot; field for 
</I>&gt;<i> RT-Socket-CAN. Also without priority field, the TX buffers could be 
</I>&gt;<i> filled in a more clever way taking into account the internal priorities, 
</I>&gt;<i> but this is more tricky, of course.
</I>&gt;<i> 
</I>&gt;<i> But I also read, that the TX buffer must be refilled quickly (within the 
</I>&gt;<i> IFS) to avoid re-arbitration. Multiply TX hardware buffers relax this 
</I>&gt;<i> requirement, especially at high baud-rates. Also doing the TX loopback 
</I>&gt;<i> at TX done interrupt time will have some impact. Do you or anybody else 
</I>&gt;<i> have some experience on this issue (performance?).
</I>
Folks, don't take realtime ad absurdum. The CAN bus is per definition no
realtime medium. It just specifies that if you send a higher priority
paket it will win the arbitration over a lower priority one. Not more
and not less. Killing overall message behaviour without having defined
real world application requirements doesn't sound sane to me.

So if message ordering is only important for debugging, I'd suggest
attaching a second system to the bus and using that for debugging.

Robert 
-- 
 Dipl.-Ing. Robert Schwebel | <A HREF="http://www.pengutronix.de">http://www.pengutronix.de</A>
 Pengutronix - Linux Solutions for Science and Industry
   Handelsregister:  Amtsgericht Hildesheim, HRA 2686
     Hannoversche Str. 2, 31134 Hildesheim, Germany
   Phone: +49-5121-206917-0 |  Fax: +49-5121-206917-9


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000371.html">RFC Loopback implementation
</A></li>
	<LI>Next message: <A HREF="000378.html">RFC Loopback implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#373">[ date ]</a>
              <a href="thread.html#373">[ thread ]</a>
              <a href="subject.html#373">[ subject ]</a>
              <a href="author.html#373">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
