<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [RFC 5/5] [powerpc] Implement a p1010rdb clock source.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-core/2011-August/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BRFC%205/5%5D%20%5Bpowerpc%5D%20Implement%20a%20p1010rdb%20clock%20source.&In-Reply-To=%3C20110808113136.GS4926%40sgi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005869.html">
   <LINK REL="Next"  HREF="005874.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[RFC 5/5] [powerpc] Implement a p1010rdb clock source.</H1>
    <B>Robin Holt</B> 
    <A HREF="mailto:socketcan-core%40lists.berlios.de?Subject=Re%3A%20%5BRFC%205/5%5D%20%5Bpowerpc%5D%20Implement%20a%20p1010rdb%20clock%20source.&In-Reply-To=%3C20110808113136.GS4926%40sgi.com%3E"
       TITLE="[RFC 5/5] [powerpc] Implement a p1010rdb clock source.">holt at sgi.com
       </A><BR>
    <I>Mon Aug  8 13:31:36 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005869.html">[RFC 5/5] [powerpc] Implement a p1010rdb clock source.
</A></li>
        <LI>Next message: <A HREF="005874.html">[RFC 5/5] [powerpc] Implement a p1010rdb clock source.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5873">[ date ]</a>
              <a href="thread.html#5873">[ thread ]</a>
              <a href="subject.html#5873">[ subject ]</a>
              <a href="author.html#5873">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Aug 08, 2011 at 10:37:58AM +0200, Wolfgang Grandegger wrote:
&gt;<i> On 08/06/2011 04:34 PM, Robin Holt wrote:
</I>&gt;<i> &gt; flexcan driver needs the clk_get, clk_get_rate, etc functions
</I>&gt;<i> &gt; to work.  This patch provides the minimum functionality.
</I>&gt;<i> 
</I>&gt;<i> This needs some more general thoughts... apart from the question where
</I>&gt;<i> the code should go.
</I>&gt;<i> 
</I>&gt;<i> Like for the MSCAN on the MPC5200, the user should be *able* to select
</I>&gt;<i> an appropriate clock source and divider via DTS node properties.
</I>&gt;<i> Currently it seems, that the DTS properties must match some
</I>&gt;<i> pre-configured values, most likely set by the boot loader. Please
</I>&gt;<i> correct me if I'm wrong. For me this is generic and should go into the
</I>&gt;<i> Flexcan driver. From there, a platform specific function, e.g.
</I>&gt;<i> flexcan_set_clock() might be called.
</I>
OK.  Dug a bit more.  The p1010 built-in clocksource seems to be the
periphereal clock frequency which is system bus frequency divided
by 2.  The clock source can not be changed, but the clock divider can
by freezing the interface and setting the CTRL register.  This appears
to only be done by the boot loader.  I do not see why we can not leave
that functionality in the boot loader and then go back to a variation
on my earlier flexcan_clk_* patch.  Is that close to the direction you
think we should go or have I completely misunderstood your wishes?

Thanks,
Robin

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005869.html">[RFC 5/5] [powerpc] Implement a p1010rdb clock source.
</A></li>
	<LI>Next message: <A HREF="005874.html">[RFC 5/5] [powerpc] Implement a p1010rdb clock source.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5873">[ date ]</a>
              <a href="thread.html#5873">[ thread ]</a>
              <a href="subject.html#5873">[ subject ]</a>
              <a href="author.html#5873">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-core">More information about the Socketcan-core
mailing list</a><br>
</body></html>
